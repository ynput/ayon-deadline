<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><link rel=prev href=pipeline_actions/render_queue_action.html><link rel=next href=../Widgets/index.html><link rel=icon href=../../../../../../../../../../../img/favicon.ico><meta name=generator content="mkdocs-1.6.1, mkdocs-material-9.6.9"><title>remote_executor - ayon-deadline</title><link rel=stylesheet href=../../../../../../../../../../../assets/stylesheets/main.4af4bdda.min.css><link rel=stylesheet href=../../../../../../../../../../../assets/stylesheets/palette.06af60db.min.css><script src=https://unpkg.com/iframe-worker/shim></script><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style><link rel=stylesheet href=../../../../../../../../../../../assets/_mkdocstrings.css><link rel=stylesheet href=../../../../../../../../../../../css/custom.css><script>__md_scope=new URL("../../../../../../../../../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script></head> <body dir=ltr data-md-color-scheme=slate data-md-color-primary=indigo data-md-color-accent=indigo> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#client.ayon_deadline.repository.custom.plugins.UnrealEngine5.UnrealEnginePlugins.MoviePipelineDeadline.Content.Python.remote_executor class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <div data-md-color-scheme=default data-md-component=outdated hidden> </div> <header class="md-header md-header--shadow" data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=../../../../../../../../../../../index.html title=ayon-deadline class="md-header__button md-logo" aria-label=ayon-deadline data-md-component=logo> <img src=../../../../../../../../../../../img/ay-symbol-blackw-full.png alt=logo> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> ayon-deadline </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> remote_executor </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input class=md-option data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme=slate data-md-color-primary=indigo data-md-color-accent=indigo aria-label="Switch to light mode" type=radio name=__palette id=__palette_0> <label class="md-header__button md-icon" title="Switch to light mode" for=__palette_1 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6m0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4M7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"/></svg> </label> <input class=md-option data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme=default data-md-color-primary=indigo data-md-color-accent=indigo aria-label="Switch to dark mode" type=radio name=__palette id=__palette_1> <label class="md-header__button md-icon" title="Switch to dark mode" for=__palette_0 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3"/></svg> </label> </form> <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg> </label> <nav class=md-search__options aria-label=Search> <button type=reset class="md-search__icon md-icon" title=Clear aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg> </button> </nav> </form> <div class=md-search__output> <div class=md-search__scrollwrap tabindex=0 data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> </nav> </header> <div class=md-container data-md-component=container> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../../../../../../../../../../../index.html title=ayon-deadline class="md-nav__button md-logo" aria-label=ayon-deadline data-md-component=logo> <img src=../../../../../../../../../../../img/ay-symbol-blackw-full.png alt=logo> </a> ayon-deadline </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../../../../../../../../index.html class=md-nav__link> <span class=md-ellipsis> Home </span> </a> </li> <li class=md-nav__item> <a href=../../../../../../../../../../../license.md class=md-nav__link> <span class=md-ellipsis> License </span> </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3 checked> <label class=md-nav__link for=__nav_3 id=__nav_3_label tabindex> <span class=md-ellipsis> Reference </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_3_label aria-expanded=true> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> Reference </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_1 checked> <div class="md-nav__link md-nav__container"> <a href=../../../../../../../../../index.html class="md-nav__link "> <span class=md-ellipsis> client </span> </a> <label class="md-nav__link " for=__nav_3_1 id=__nav_3_1_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_3_1_label aria-expanded=true> <label class=md-nav__title for=__nav_3_1> <span class="md-nav__icon md-icon"></span> client </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_1_1 checked> <div class="md-nav__link md-nav__container"> <a href=../../../../../../../../index.html class="md-nav__link "> <span class=md-ellipsis> ayon_deadline </span> </a> <label class="md-nav__link " for=__nav_3_1_1 id=__nav_3_1_1_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_3_1_1_label aria-expanded=true> <label class=md-nav__title for=__nav_3_1_1> <span class="md-nav__icon md-icon"></span> ayon_deadline </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../../../../../abstract_submit_deadline.html class=md-nav__link> <span class=md-ellipsis> abstract_submit_deadline </span> </a> </li> <li class=md-nav__item> <a href=../../../../../../../../addon.html class=md-nav__link> <span class=md-ellipsis> addon </span> </a> </li> <li class=md-nav__item> <a href=../../../../../../../../constants.html class=md-nav__link> <span class=md-ellipsis> constants </span> </a> </li> <li class=md-nav__item> <a href=../../../../../../../../lib.html class=md-nav__link> <span class=md-ellipsis> lib </span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../../../../../../../plugins/publish/aftereffects/submit_aftereffects_deadline.html class=md-nav__link> <span class=md-ellipsis> plugins </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_1_1_6 checked> <div class="md-nav__link md-nav__container"> <a href=../../../../../../../index.html class="md-nav__link "> <span class=md-ellipsis> repository </span> </a> <label class="md-nav__link " for=__nav_3_1_1_6 id=__nav_3_1_1_6_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=4 aria-labelledby=__nav_3_1_1_6_label aria-expanded=true> <label class=md-nav__title for=__nav_3_1_1_6> <span class="md-nav__icon md-icon"></span> repository </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_1_1_6_1 checked> <div class="md-nav__link md-nav__container"> <a href=../../../../../../index.html class="md-nav__link "> <span class=md-ellipsis> custom </span> </a> <label class="md-nav__link " for=__nav_3_1_1_6_1 id=__nav_3_1_1_6_1_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=5 aria-labelledby=__nav_3_1_1_6_1_label aria-expanded=true> <label class=md-nav__title for=__nav_3_1_1_6_1> <span class="md-nav__icon md-icon"></span> custom </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_1_1_6_1_1 checked> <div class="md-nav__link md-nav__container"> <a href=../../../../../index.html class="md-nav__link "> <span class=md-ellipsis> plugins </span> </a> <label class="md-nav__link " for=__nav_3_1_1_6_1_1 id=__nav_3_1_1_6_1_1_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=6 aria-labelledby=__nav_3_1_1_6_1_1_label aria-expanded=true> <label class=md-nav__title for=__nav_3_1_1_6_1_1> <span class="md-nav__icon md-icon"></span> plugins </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../../../../Ayon/Ayon.html class=md-nav__link> <span class=md-ellipsis> Ayon </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../../../../CelAction/CelAction.html class=md-nav__link> <span class=md-ellipsis> CelAction </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class=md-nav__item> <a href=../../../../../GlobalJobPreLoad.html class=md-nav__link> <span class=md-ellipsis> GlobalJobPreLoad </span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../../../../HarmonyAYON/HarmonyAYON.html class=md-nav__link> <span class=md-ellipsis> HarmonyAYON </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_1_1_6_1_1_5 checked> <div class="md-nav__link md-nav__container"> <a href=../../../../index.html class="md-nav__link "> <span class=md-ellipsis> UnrealEngine5 </span> </a> <label class="md-nav__link " for=__nav_3_1_1_6_1_1_5 id=__nav_3_1_1_6_1_1_5_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=7 aria-labelledby=__nav_3_1_1_6_1_1_5_label aria-expanded=true> <label class=md-nav__title for=__nav_3_1_1_6_1_1_5> <span class="md-nav__icon md-icon"></span> UnrealEngine5 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../DeadlineRPC.html class=md-nav__link> <span class=md-ellipsis> DeadlineRPC </span> </a> </li> <li class=md-nav__item> <a href=../../../../JobPreLoad.html class=md-nav__link> <span class=md-ellipsis> JobPreLoad </span> </a> </li> <li class=md-nav__item> <a href=../../../../PluginPreLoad.html class=md-nav__link> <span class=md-ellipsis> PluginPreLoad </span> </a> </li> <li class=md-nav__item> <a href=../../../../UnrealEngine5.html class=md-nav__link> <span class=md-ellipsis> UnrealEngine5 </span> </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_1_1_6_1_1_5_5 checked> <div class="md-nav__link md-nav__container"> <a href=../../../index.html class="md-nav__link "> <span class=md-ellipsis> UnrealEnginePlugins </span> </a> <label class="md-nav__link " for=__nav_3_1_1_6_1_1_5_5 id=__nav_3_1_1_6_1_1_5_5_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=8 aria-labelledby=__nav_3_1_1_6_1_1_5_5_label aria-expanded=true> <label class=md-nav__title for=__nav_3_1_1_6_1_1_5_5> <span class="md-nav__icon md-icon"></span> UnrealEnginePlugins </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_1_1_6_1_1_5_5_1 checked> <div class="md-nav__link md-nav__container"> <a href=../../index.html class="md-nav__link "> <span class=md-ellipsis> MoviePipelineDeadline </span> </a> <label class="md-nav__link " for=__nav_3_1_1_6_1_1_5_5_1 id=__nav_3_1_1_6_1_1_5_5_1_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=9 aria-labelledby=__nav_3_1_1_6_1_1_5_5_1_label aria-expanded=true> <label class=md-nav__title for=__nav_3_1_1_6_1_1_5_5_1> <span class="md-nav__icon md-icon"></span> MoviePipelineDeadline </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../Config/index.html class=md-nav__link> <span class=md-ellipsis> Config </span> </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_1_1_6_1_1_5_5_1_2 checked> <div class="md-nav__link md-nav__container"> <a href=../index.html class="md-nav__link "> <span class=md-ellipsis> Content </span> </a> <label class="md-nav__link " for=__nav_3_1_1_6_1_1_5_5_1_2 id=__nav_3_1_1_6_1_1_5_5_1_2_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=10 aria-labelledby=__nav_3_1_1_6_1_1_5_5_1_2_label aria-expanded=true> <label class=md-nav__title for=__nav_3_1_1_6_1_1_5_5_1_2> <span class="md-nav__icon md-icon"></span> Content </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_1_1_6_1_1_5_5_1_2_1 checked> <div class="md-nav__link md-nav__container"> <a href=index.html class="md-nav__link "> <span class=md-ellipsis> Python </span> </a> <label class="md-nav__link " for=__nav_3_1_1_6_1_1_5_5_1_2_1 id=__nav_3_1_1_6_1_1_5_5_1_2_1_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=11 aria-labelledby=__nav_3_1_1_6_1_1_5_5_1_2_1_label aria-expanded=true> <label class=md-nav__title for=__nav_3_1_1_6_1_1_5_5_1_2_1> <span class="md-nav__icon md-icon"></span> Python </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=init_unreal.html class=md-nav__link> <span class=md-ellipsis> init_unreal </span> </a> </li> <li class=md-nav__item> <a href=mrq_cli.html class=md-nav__link> <span class=md-ellipsis> mrq_cli </span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=mrq_cli_modes/render_manifest.html class=md-nav__link> <span class=md-ellipsis> mrq_cli_modes </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class=md-nav__item> <a href=mrq_rpc.html class=md-nav__link> <span class=md-ellipsis> mrq_rpc </span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=pipeline_actions/render_queue_action.html class=md-nav__link> <span class=md-ellipsis> pipeline_actions </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> <span class=md-ellipsis> remote_executor </span> <span class="md-nav__icon md-icon"></span> </label> <a href=remote_executor.html class="md-nav__link md-nav__link--active"> <span class=md-ellipsis> remote_executor </span> </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#client.ayon_deadline.repository.custom.plugins.UnrealEngine5.UnrealEnginePlugins.MoviePipelineDeadline.Content.Python.remote_executor class=md-nav__link> <span class=md-ellipsis> remote_executor </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_deadline.repository.custom.plugins.UnrealEngine5.UnrealEnginePlugins.MoviePipelineDeadline.Content.Python.remote_executor.MoviePipelineDeadlineRemoteExecutor class=md-nav__link> <span class=md-ellipsis> MoviePipelineDeadlineRemoteExecutor </span> </a> <nav class=md-nav aria-label=MoviePipelineDeadlineRemoteExecutor> <ul class=md-nav__list> <li class=md-nav__item> <a href=#client.ayon_deadline.repository.custom.plugins.UnrealEngine5.UnrealEnginePlugins.MoviePipelineDeadline.Content.Python.remote_executor.MoviePipelineDeadlineRemoteExecutor.execute class=md-nav__link> <span class=md-ellipsis> execute </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_deadline.repository.custom.plugins.UnrealEngine5.UnrealEnginePlugins.MoviePipelineDeadline.Content.Python.remote_executor.MoviePipelineDeadlineRemoteExecutor.submit_job class=md-nav__link> <span class=md-ellipsis> submit_job </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../Widgets/index.html class=md-nav__link> <span class=md-ellipsis> Widgets </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../Resources/index.html class=md-nav__link> <span class=md-ellipsis> Resources </span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../Source/MoviePipelineDeadline/Private/index.html class=md-nav__link> <span class=md-ellipsis> Source </span> <span class="md-nav__icon md-icon"></span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../../UnrealDeadlineService/Config/index.html class=md-nav__link> <span class=md-ellipsis> UnrealDeadlineService </span> <span class="md-nav__icon md-icon"></span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../../../UnrealSyncUtil.html class=md-nav__link> <span class=md-ellipsis> UnrealSyncUtil </span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../../../ue_utils/rpc/base_server.html class=md-nav__link> <span class=md-ellipsis> ue_utils </span> <span class="md-nav__icon md-icon"></span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../../../../../../../version.html class=md-nav__link> <span class=md-ellipsis> version </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../../../../../../../../../server/settings/main.html class=md-nav__link> <span class=md-ellipsis> server </span> <span class="md-nav__icon md-icon"></span> </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#client.ayon_deadline.repository.custom.plugins.UnrealEngine5.UnrealEnginePlugins.MoviePipelineDeadline.Content.Python.remote_executor class=md-nav__link> <span class=md-ellipsis> remote_executor </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_deadline.repository.custom.plugins.UnrealEngine5.UnrealEnginePlugins.MoviePipelineDeadline.Content.Python.remote_executor.MoviePipelineDeadlineRemoteExecutor class=md-nav__link> <span class=md-ellipsis> MoviePipelineDeadlineRemoteExecutor </span> </a> <nav class=md-nav aria-label=MoviePipelineDeadlineRemoteExecutor> <ul class=md-nav__list> <li class=md-nav__item> <a href=#client.ayon_deadline.repository.custom.plugins.UnrealEngine5.UnrealEnginePlugins.MoviePipelineDeadline.Content.Python.remote_executor.MoviePipelineDeadlineRemoteExecutor.execute class=md-nav__link> <span class=md-ellipsis> execute </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_deadline.repository.custom.plugins.UnrealEngine5.UnrealEnginePlugins.MoviePipelineDeadline.Content.Python.remote_executor.MoviePipelineDeadlineRemoteExecutor.submit_job class=md-nav__link> <span class=md-ellipsis> submit_job </span> </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <h1>remote_executor</h1> <div class="doc doc-object doc-module"> <a id=client.ayon_deadline.repository.custom.plugins.UnrealEngine5.UnrealEnginePlugins.MoviePipelineDeadline.Content.Python.remote_executor></a> <div class="doc doc-contents first"> <div class="doc doc-children"> <div class="doc doc-object doc-class"> <h2 id=client.ayon_deadline.repository.custom.plugins.UnrealEngine5.UnrealEnginePlugins.MoviePipelineDeadline.Content.Python.remote_executor.MoviePipelineDeadlineRemoteExecutor class="doc doc-heading"> <code>MoviePipelineDeadlineRemoteExecutor</code> </h2> <div class="doc doc-contents "> <p class="doc doc-class-bases"> Bases: <code><span title=unreal.MoviePipelineExecutorBase>MoviePipelineExecutorBase</span></code></p> <p>This class defines the editor implementation for Deadline (what happens when you press 'Render (Remote)', which is in charge of taking a movie queue from the UI and processing it into something Deadline can handle.</p> <details class=quote> <summary>Source code in <code>client/ayon_deadline/repository/custom/plugins/UnrealEngine5/UnrealEnginePlugins/MoviePipelineDeadline/Content/Python/remote_executor.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 18</span>
<span class=normal> 19</span>
<span class=normal> 20</span>
<span class=normal> 21</span>
<span class=normal> 22</span>
<span class=normal> 23</span>
<span class=normal> 24</span>
<span class=normal> 25</span>
<span class=normal> 26</span>
<span class=normal> 27</span>
<span class=normal> 28</span>
<span class=normal> 29</span>
<span class=normal> 30</span>
<span class=normal> 31</span>
<span class=normal> 32</span>
<span class=normal> 33</span>
<span class=normal> 34</span>
<span class=normal> 35</span>
<span class=normal> 36</span>
<span class=normal> 37</span>
<span class=normal> 38</span>
<span class=normal> 39</span>
<span class=normal> 40</span>
<span class=normal> 41</span>
<span class=normal> 42</span>
<span class=normal> 43</span>
<span class=normal> 44</span>
<span class=normal> 45</span>
<span class=normal> 46</span>
<span class=normal> 47</span>
<span class=normal> 48</span>
<span class=normal> 49</span>
<span class=normal> 50</span>
<span class=normal> 51</span>
<span class=normal> 52</span>
<span class=normal> 53</span>
<span class=normal> 54</span>
<span class=normal> 55</span>
<span class=normal> 56</span>
<span class=normal> 57</span>
<span class=normal> 58</span>
<span class=normal> 59</span>
<span class=normal> 60</span>
<span class=normal> 61</span>
<span class=normal> 62</span>
<span class=normal> 63</span>
<span class=normal> 64</span>
<span class=normal> 65</span>
<span class=normal> 66</span>
<span class=normal> 67</span>
<span class=normal> 68</span>
<span class=normal> 69</span>
<span class=normal> 70</span>
<span class=normal> 71</span>
<span class=normal> 72</span>
<span class=normal> 73</span>
<span class=normal> 74</span>
<span class=normal> 75</span>
<span class=normal> 76</span>
<span class=normal> 77</span>
<span class=normal> 78</span>
<span class=normal> 79</span>
<span class=normal> 80</span>
<span class=normal> 81</span>
<span class=normal> 82</span>
<span class=normal> 83</span>
<span class=normal> 84</span>
<span class=normal> 85</span>
<span class=normal> 86</span>
<span class=normal> 87</span>
<span class=normal> 88</span>
<span class=normal> 89</span>
<span class=normal> 90</span>
<span class=normal> 91</span>
<span class=normal> 92</span>
<span class=normal> 93</span>
<span class=normal> 94</span>
<span class=normal> 95</span>
<span class=normal> 96</span>
<span class=normal> 97</span>
<span class=normal> 98</span>
<span class=normal> 99</span>
<span class=normal>100</span>
<span class=normal>101</span>
<span class=normal>102</span>
<span class=normal>103</span>
<span class=normal>104</span>
<span class=normal>105</span>
<span class=normal>106</span>
<span class=normal>107</span>
<span class=normal>108</span>
<span class=normal>109</span>
<span class=normal>110</span>
<span class=normal>111</span>
<span class=normal>112</span>
<span class=normal>113</span>
<span class=normal>114</span>
<span class=normal>115</span>
<span class=normal>116</span>
<span class=normal>117</span>
<span class=normal>118</span>
<span class=normal>119</span>
<span class=normal>120</span>
<span class=normal>121</span>
<span class=normal>122</span>
<span class=normal>123</span>
<span class=normal>124</span>
<span class=normal>125</span>
<span class=normal>126</span>
<span class=normal>127</span>
<span class=normal>128</span>
<span class=normal>129</span>
<span class=normal>130</span>
<span class=normal>131</span>
<span class=normal>132</span>
<span class=normal>133</span>
<span class=normal>134</span>
<span class=normal>135</span>
<span class=normal>136</span>
<span class=normal>137</span>
<span class=normal>138</span>
<span class=normal>139</span>
<span class=normal>140</span>
<span class=normal>141</span>
<span class=normal>142</span>
<span class=normal>143</span>
<span class=normal>144</span>
<span class=normal>145</span>
<span class=normal>146</span>
<span class=normal>147</span>
<span class=normal>148</span>
<span class=normal>149</span>
<span class=normal>150</span>
<span class=normal>151</span>
<span class=normal>152</span>
<span class=normal>153</span>
<span class=normal>154</span>
<span class=normal>155</span>
<span class=normal>156</span>
<span class=normal>157</span>
<span class=normal>158</span>
<span class=normal>159</span>
<span class=normal>160</span>
<span class=normal>161</span>
<span class=normal>162</span>
<span class=normal>163</span>
<span class=normal>164</span>
<span class=normal>165</span>
<span class=normal>166</span>
<span class=normal>167</span>
<span class=normal>168</span>
<span class=normal>169</span>
<span class=normal>170</span>
<span class=normal>171</span>
<span class=normal>172</span>
<span class=normal>173</span>
<span class=normal>174</span>
<span class=normal>175</span>
<span class=normal>176</span>
<span class=normal>177</span>
<span class=normal>178</span>
<span class=normal>179</span>
<span class=normal>180</span>
<span class=normal>181</span>
<span class=normal>182</span>
<span class=normal>183</span>
<span class=normal>184</span>
<span class=normal>185</span>
<span class=normal>186</span>
<span class=normal>187</span>
<span class=normal>188</span>
<span class=normal>189</span>
<span class=normal>190</span>
<span class=normal>191</span>
<span class=normal>192</span>
<span class=normal>193</span>
<span class=normal>194</span>
<span class=normal>195</span>
<span class=normal>196</span>
<span class=normal>197</span>
<span class=normal>198</span>
<span class=normal>199</span>
<span class=normal>200</span>
<span class=normal>201</span>
<span class=normal>202</span>
<span class=normal>203</span>
<span class=normal>204</span>
<span class=normal>205</span>
<span class=normal>206</span>
<span class=normal>207</span>
<span class=normal>208</span>
<span class=normal>209</span>
<span class=normal>210</span>
<span class=normal>211</span>
<span class=normal>212</span>
<span class=normal>213</span>
<span class=normal>214</span>
<span class=normal>215</span>
<span class=normal>216</span>
<span class=normal>217</span>
<span class=normal>218</span>
<span class=normal>219</span>
<span class=normal>220</span>
<span class=normal>221</span>
<span class=normal>222</span>
<span class=normal>223</span>
<span class=normal>224</span>
<span class=normal>225</span>
<span class=normal>226</span>
<span class=normal>227</span>
<span class=normal>228</span>
<span class=normal>229</span>
<span class=normal>230</span>
<span class=normal>231</span>
<span class=normal>232</span>
<span class=normal>233</span>
<span class=normal>234</span>
<span class=normal>235</span>
<span class=normal>236</span>
<span class=normal>237</span>
<span class=normal>238</span>
<span class=normal>239</span>
<span class=normal>240</span>
<span class=normal>241</span>
<span class=normal>242</span>
<span class=normal>243</span>
<span class=normal>244</span>
<span class=normal>245</span>
<span class=normal>246</span>
<span class=normal>247</span>
<span class=normal>248</span>
<span class=normal>249</span>
<span class=normal>250</span>
<span class=normal>251</span>
<span class=normal>252</span>
<span class=normal>253</span>
<span class=normal>254</span>
<span class=normal>255</span>
<span class=normal>256</span>
<span class=normal>257</span>
<span class=normal>258</span>
<span class=normal>259</span>
<span class=normal>260</span>
<span class=normal>261</span>
<span class=normal>262</span>
<span class=normal>263</span>
<span class=normal>264</span>
<span class=normal>265</span>
<span class=normal>266</span>
<span class=normal>267</span>
<span class=normal>268</span>
<span class=normal>269</span>
<span class=normal>270</span>
<span class=normal>271</span>
<span class=normal>272</span>
<span class=normal>273</span>
<span class=normal>274</span>
<span class=normal>275</span>
<span class=normal>276</span>
<span class=normal>277</span>
<span class=normal>278</span>
<span class=normal>279</span>
<span class=normal>280</span>
<span class=normal>281</span>
<span class=normal>282</span>
<span class=normal>283</span>
<span class=normal>284</span>
<span class=normal>285</span>
<span class=normal>286</span>
<span class=normal>287</span>
<span class=normal>288</span>
<span class=normal>289</span>
<span class=normal>290</span>
<span class=normal>291</span>
<span class=normal>292</span>
<span class=normal>293</span>
<span class=normal>294</span>
<span class=normal>295</span>
<span class=normal>296</span>
<span class=normal>297</span>
<span class=normal>298</span>
<span class=normal>299</span>
<span class=normal>300</span>
<span class=normal>301</span>
<span class=normal>302</span>
<span class=normal>303</span>
<span class=normal>304</span>
<span class=normal>305</span>
<span class=normal>306</span>
<span class=normal>307</span>
<span class=normal>308</span>
<span class=normal>309</span>
<span class=normal>310</span>
<span class=normal>311</span>
<span class=normal>312</span>
<span class=normal>313</span>
<span class=normal>314</span>
<span class=normal>315</span>
<span class=normal>316</span>
<span class=normal>317</span>
<span class=normal>318</span>
<span class=normal>319</span>
<span class=normal>320</span>
<span class=normal>321</span>
<span class=normal>322</span>
<span class=normal>323</span>
<span class=normal>324</span>
<span class=normal>325</span>
<span class=normal>326</span>
<span class=normal>327</span>
<span class=normal>328</span>
<span class=normal>329</span>
<span class=normal>330</span>
<span class=normal>331</span>
<span class=normal>332</span>
<span class=normal>333</span>
<span class=normal>334</span>
<span class=normal>335</span>
<span class=normal>336</span>
<span class=normal>337</span>
<span class=normal>338</span>
<span class=normal>339</span>
<span class=normal>340</span>
<span class=normal>341</span>
<span class=normal>342</span>
<span class=normal>343</span>
<span class=normal>344</span>
<span class=normal>345</span>
<span class=normal>346</span>
<span class=normal>347</span>
<span class=normal>348</span>
<span class=normal>349</span>
<span class=normal>350</span>
<span class=normal>351</span>
<span class=normal>352</span>
<span class=normal>353</span>
<span class=normal>354</span>
<span class=normal>355</span>
<span class=normal>356</span>
<span class=normal>357</span>
<span class=normal>358</span>
<span class=normal>359</span>
<span class=normal>360</span>
<span class=normal>361</span>
<span class=normal>362</span>
<span class=normal>363</span>
<span class=normal>364</span>
<span class=normal>365</span>
<span class=normal>366</span>
<span class=normal>367</span>
<span class=normal>368</span>
<span class=normal>369</span>
<span class=normal>370</span>
<span class=normal>371</span>
<span class=normal>372</span>
<span class=normal>373</span>
<span class=normal>374</span>
<span class=normal>375</span>
<span class=normal>376</span>
<span class=normal>377</span>
<span class=normal>378</span>
<span class=normal>379</span>
<span class=normal>380</span>
<span class=normal>381</span>
<span class=normal>382</span>
<span class=normal>383</span>
<span class=normal>384</span>
<span class=normal>385</span>
<span class=normal>386</span>
<span class=normal>387</span>
<span class=normal>388</span>
<span class=normal>389</span>
<span class=normal>390</span>
<span class=normal>391</span>
<span class=normal>392</span>
<span class=normal>393</span>
<span class=normal>394</span>
<span class=normal>395</span>
<span class=normal>396</span>
<span class=normal>397</span>
<span class=normal>398</span>
<span class=normal>399</span>
<span class=normal>400</span>
<span class=normal>401</span>
<span class=normal>402</span>
<span class=normal>403</span>
<span class=normal>404</span>
<span class=normal>405</span>
<span class=normal>406</span>
<span class=normal>407</span>
<span class=normal>408</span>
<span class=normal>409</span>
<span class=normal>410</span>
<span class=normal>411</span>
<span class=normal>412</span>
<span class=normal>413</span>
<span class=normal>414</span>
<span class=normal>415</span>
<span class=normal>416</span>
<span class=normal>417</span>
<span class=normal>418</span>
<span class=normal>419</span>
<span class=normal>420</span>
<span class=normal>421</span>
<span class=normal>422</span>
<span class=normal>423</span>
<span class=normal>424</span>
<span class=normal>425</span>
<span class=normal>426</span>
<span class=normal>427</span>
<span class=normal>428</span>
<span class=normal>429</span>
<span class=normal>430</span>
<span class=normal>431</span>
<span class=normal>432</span>
<span class=normal>433</span>
<span class=normal>434</span>
<span class=normal>435</span>
<span class=normal>436</span>
<span class=normal>437</span>
<span class=normal>438</span>
<span class=normal>439</span>
<span class=normal>440</span>
<span class=normal>441</span>
<span class=normal>442</span>
<span class=normal>443</span>
<span class=normal>444</span>
<span class=normal>445</span>
<span class=normal>446</span>
<span class=normal>447</span>
<span class=normal>448</span>
<span class=normal>449</span>
<span class=normal>450</span>
<span class=normal>451</span>
<span class=normal>452</span>
<span class=normal>453</span>
<span class=normal>454</span>
<span class=normal>455</span>
<span class=normal>456</span>
<span class=normal>457</span>
<span class=normal>458</span>
<span class=normal>459</span>
<span class=normal>460</span>
<span class=normal>461</span>
<span class=normal>462</span>
<span class=normal>463</span>
<span class=normal>464</span>
<span class=normal>465</span>
<span class=normal>466</span>
<span class=normal>467</span>
<span class=normal>468</span>
<span class=normal>469</span>
<span class=normal>470</span>
<span class=normal>471</span>
<span class=normal>472</span>
<span class=normal>473</span>
<span class=normal>474</span>
<span class=normal>475</span></pre></div></td><td class=code><div><pre><span></span><code><span class=nd>@unreal</span><span class=o>.</span><span class=n>uclass</span><span class=p>()</span>
<span class=k>class</span><span class=w> </span><span class=nc>MoviePipelineDeadlineRemoteExecutor</span><span class=p>(</span><span class=n>unreal</span><span class=o>.</span><span class=n>MoviePipelineExecutorBase</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;</span>
<span class=sd>    This class defines the editor implementation for Deadline (what happens when you</span>
<span class=sd>    press &#39;Render (Remote)&#39;, which is in charge of taking a movie queue from the UI</span>
<span class=sd>    and processing it into something Deadline can handle.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=c1># The queue we are working on, null if no queue has been provided.</span>
    <span class=n>pipeline_queue</span> <span class=o>=</span> <span class=n>unreal</span><span class=o>.</span><span class=n>uproperty</span><span class=p>(</span><span class=n>unreal</span><span class=o>.</span><span class=n>MoviePipelineQueue</span><span class=p>)</span>
    <span class=n>job_ids</span> <span class=o>=</span> <span class=n>unreal</span><span class=o>.</span><span class=n>uproperty</span><span class=p>(</span><span class=n>unreal</span><span class=o>.</span><span class=n>Array</span><span class=p>(</span><span class=nb>str</span><span class=p>))</span>

    <span class=c1># A MoviePipelineExecutor implementation must override this.</span>
    <span class=nd>@unreal</span><span class=o>.</span><span class=n>ufunction</span><span class=p>(</span><span class=n>override</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
    <span class=k>def</span><span class=w> </span><span class=nf>execute</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>pipeline_queue</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;</span>
<span class=sd>        This is called when the user presses Render (Remote) in the UI. We will</span>
<span class=sd>        split the queue up into multiple jobs. Each job will be submitted to</span>
<span class=sd>        deadline separately, with each shot within the job split into one Deadline</span>
<span class=sd>        task per shot.</span>
<span class=sd>        &quot;&quot;&quot;</span>

        <span class=n>unreal</span><span class=o>.</span><span class=n>log</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;Asked to execute Queue: </span><span class=si>{</span><span class=n>pipeline_queue</span><span class=si>}</span><span class=s2>&quot;</span><span class=p>)</span>
        <span class=n>unreal</span><span class=o>.</span><span class=n>log</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;Queue has </span><span class=si>{</span><span class=nb>len</span><span class=p>(</span><span class=n>pipeline_queue</span><span class=o>.</span><span class=n>get_jobs</span><span class=p>())</span><span class=si>}</span><span class=s2> jobs&quot;</span><span class=p>)</span>

        <span class=c1># Don&#39;t try to process empty/null Queues, no need to send them to</span>
        <span class=c1># Deadline.</span>
        <span class=k>if</span> <span class=ow>not</span> <span class=n>pipeline_queue</span> <span class=ow>or</span> <span class=p>(</span><span class=ow>not</span> <span class=n>pipeline_queue</span><span class=o>.</span><span class=n>get_jobs</span><span class=p>()):</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>on_executor_finished_impl</span><span class=p>()</span>
            <span class=k>return</span>

        <span class=c1># The user must save their work and check it in so that Deadline</span>
        <span class=c1># can sync it.</span>
        <span class=n>dirty_packages</span> <span class=o>=</span> <span class=p>[]</span>
        <span class=n>dirty_packages</span><span class=o>.</span><span class=n>extend</span><span class=p>(</span>
            <span class=n>unreal</span><span class=o>.</span><span class=n>EditorLoadingAndSavingUtils</span><span class=o>.</span><span class=n>get_dirty_content_packages</span><span class=p>()</span>
        <span class=p>)</span>
        <span class=n>dirty_packages</span><span class=o>.</span><span class=n>extend</span><span class=p>(</span>
            <span class=n>unreal</span><span class=o>.</span><span class=n>EditorLoadingAndSavingUtils</span><span class=o>.</span><span class=n>get_dirty_map_packages</span><span class=p>()</span>
        <span class=p>)</span>

        <span class=c1># Sometimes the dialog will return `False`</span>
        <span class=c1># even when there are no packages to save. so we are</span>
        <span class=c1># being explict about the packages we need to save</span>
        <span class=k>if</span> <span class=n>dirty_packages</span><span class=p>:</span>
            <span class=k>if</span> <span class=ow>not</span> <span class=n>unreal</span><span class=o>.</span><span class=n>EditorLoadingAndSavingUtils</span><span class=o>.</span><span class=n>save_dirty_packages_with_dialog</span><span class=p>(</span>
                <span class=kc>True</span><span class=p>,</span> <span class=kc>True</span>
            <span class=p>):</span>
                <span class=n>message</span> <span class=o>=</span> <span class=p>(</span>
                    <span class=s2>&quot;One or more jobs in the queue have an unsaved map/content. &quot;</span>
                    <span class=s2>&quot;</span><span class=si>{packages}</span><span class=s2> &quot;</span>
                    <span class=s2>&quot;Please save and check-in all work before submission.&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span>
                        <span class=n>packages</span><span class=o>=</span><span class=s2>&quot;</span><span class=se>\n</span><span class=s2>&quot;</span><span class=o>.</span><span class=n>join</span><span class=p>(</span><span class=n>dirty_packages</span><span class=p>)</span>
                    <span class=p>)</span>
                <span class=p>)</span>

                <span class=n>unreal</span><span class=o>.</span><span class=n>log_error</span><span class=p>(</span><span class=n>message</span><span class=p>)</span>
                <span class=n>unreal</span><span class=o>.</span><span class=n>EditorDialog</span><span class=o>.</span><span class=n>show_message</span><span class=p>(</span>
                    <span class=s2>&quot;Unsaved Maps/Content&quot;</span><span class=p>,</span> <span class=n>message</span><span class=p>,</span> <span class=n>unreal</span><span class=o>.</span><span class=n>AppMsgType</span><span class=o>.</span><span class=n>OK</span>
                <span class=p>)</span>
                <span class=bp>self</span><span class=o>.</span><span class=n>on_executor_finished_impl</span><span class=p>()</span>
                <span class=k>return</span>

        <span class=c1># Make sure all the maps in the queue exist on disk somewhere,</span>
        <span class=c1># unsaved maps can&#39;t be loaded on the remote machine, and it&#39;s common</span>
        <span class=c1># to have the wrong map name if you submit without loading the map.</span>
        <span class=n>has_valid_map</span> <span class=o>=</span> <span class=p>(</span>
            <span class=n>unreal</span><span class=o>.</span><span class=n>MoviePipelineEditorLibrary</span><span class=o>.</span><span class=n>is_map_valid_for_remote_render</span><span class=p>(</span>
                <span class=n>pipeline_queue</span><span class=o>.</span><span class=n>get_jobs</span><span class=p>()</span>
            <span class=p>)</span>
        <span class=p>)</span>
        <span class=k>if</span> <span class=ow>not</span> <span class=n>has_valid_map</span><span class=p>:</span>
            <span class=n>message</span> <span class=o>=</span> <span class=p>(</span>
                <span class=s2>&quot;One or more jobs in the queue have an unsaved map as &quot;</span>
                <span class=s2>&quot;their target map. &quot;</span>
                <span class=s2>&quot;These unsaved maps cannot be loaded by an external process, &quot;</span>
                <span class=s2>&quot;and the render has been aborted.&quot;</span>
            <span class=p>)</span>
            <span class=n>unreal</span><span class=o>.</span><span class=n>log_error</span><span class=p>(</span><span class=n>message</span><span class=p>)</span>
            <span class=n>unreal</span><span class=o>.</span><span class=n>EditorDialog</span><span class=o>.</span><span class=n>show_message</span><span class=p>(</span>
                <span class=s2>&quot;Unsaved Maps&quot;</span><span class=p>,</span> <span class=n>message</span><span class=p>,</span> <span class=n>unreal</span><span class=o>.</span><span class=n>AppMsgType</span><span class=o>.</span><span class=n>OK</span>
            <span class=p>)</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>on_executor_finished_impl</span><span class=p>()</span>
            <span class=k>return</span>

        <span class=bp>self</span><span class=o>.</span><span class=n>pipeline_queue</span> <span class=o>=</span> <span class=n>pipeline_queue</span>

        <span class=n>deadline_settings</span> <span class=o>=</span> <span class=n>unreal</span><span class=o>.</span><span class=n>get_default_object</span><span class=p>(</span>
            <span class=n>unreal</span><span class=o>.</span><span class=n>MoviePipelineDeadlineSettings</span>
        <span class=p>)</span>

        <span class=c1># Arguments to pass to the executable. This can be modified by settings</span>
        <span class=c1># in the event a setting needs to be applied early.</span>
        <span class=c1># In the format of -foo -bar</span>
        <span class=c1># commandLineArgs = &quot;&quot;</span>
        <span class=n>command_args</span> <span class=o>=</span> <span class=p>[]</span>

        <span class=c1># Append all of our inherited command line arguments from the editor.</span>
        <span class=n>in_process_executor_settings</span> <span class=o>=</span> <span class=n>unreal</span><span class=o>.</span><span class=n>get_default_object</span><span class=p>(</span>
            <span class=n>unreal</span><span class=o>.</span><span class=n>MoviePipelineInProcessExecutorSettings</span>
        <span class=p>)</span>
        <span class=n>inherited_cmds</span> <span class=o>=</span> <span class=n>in_process_executor_settings</span><span class=o>.</span><span class=n>inherited_command_line_arguments</span>

        <span class=c1># Sanitize the commandline by removing any execcmds that may</span>
        <span class=c1># have passed through the commandline.</span>
        <span class=c1># We remove the execcmds because, in some cases, users may execute a</span>
        <span class=c1># script that is local to their editor build for some automated</span>
        <span class=c1># workflow but this is not ideal on the farm. We will expect all</span>
        <span class=c1># custom startup commands for rendering to go through the `Start</span>
        <span class=c1># Command` in the MRQ settings.</span>
        <span class=n>inherited_cmds</span> <span class=o>=</span> <span class=n>re</span><span class=o>.</span><span class=n>sub</span><span class=p>(</span>
            <span class=s2>&quot;.*(?P&lt;cmds&gt;-execcmds=[\s\S]+[</span><span class=se>\&#39;\&quot;</span><span class=s2>])&quot;</span><span class=p>,</span>
            <span class=s2>&quot;&quot;</span><span class=p>,</span>
            <span class=n>inherited_cmds</span>
        <span class=p>)</span>

        <span class=n>command_args</span><span class=o>.</span><span class=n>extend</span><span class=p>(</span><span class=n>inherited_cmds</span><span class=o>.</span><span class=n>split</span><span class=p>(</span><span class=s2>&quot; &quot;</span><span class=p>))</span>
        <span class=n>command_args</span><span class=o>.</span><span class=n>extend</span><span class=p>(</span>
            <span class=n>in_process_executor_settings</span><span class=o>.</span><span class=n>additional_command_line_arguments</span><span class=o>.</span><span class=n>split</span><span class=p>(</span>
                <span class=s2>&quot; &quot;</span>
            <span class=p>)</span>
        <span class=p>)</span>

        <span class=n>command_args</span><span class=o>.</span><span class=n>extend</span><span class=p>(</span>
            <span class=p>[</span><span class=s2>&quot;-nohmd&quot;</span><span class=p>,</span> <span class=s2>&quot;-windowed&quot;</span><span class=p>,</span> <span class=sa>f</span><span class=s2>&quot;-ResX=1280&quot;</span><span class=p>,</span> <span class=sa>f</span><span class=s2>&quot;-ResY=720&quot;</span><span class=p>]</span>
        <span class=p>)</span>

        <span class=c1># Get the project level preset</span>
        <span class=n>project_preset</span> <span class=o>=</span> <span class=n>deadline_settings</span><span class=o>.</span><span class=n>default_job_preset</span>

        <span class=c1># Get the job and plugin info string.</span>
        <span class=c1># Note:</span>
        <span class=c1>#   Sometimes a project level default may not be set,</span>
        <span class=c1>#   so if this returns an empty dictionary, that is okay</span>
        <span class=c1>#   as we primarily care about the job level preset.</span>
        <span class=c1>#   Catch any exceptions here and continue</span>
        <span class=k>try</span><span class=p>:</span>
            <span class=n>project_job_info</span><span class=p>,</span> <span class=n>project_plugin_info</span> <span class=o>=</span> <span class=n>get_deadline_info_from_preset</span><span class=p>(</span><span class=n>job_preset</span><span class=o>=</span><span class=n>project_preset</span><span class=p>)</span>

        <span class=k>except</span> <span class=ne>Exception</span><span class=p>:</span>
            <span class=k>pass</span>

        <span class=n>deadline_service</span> <span class=o>=</span> <span class=n>get_global_deadline_service_instance</span><span class=p>()</span>

        <span class=k>for</span> <span class=n>job</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>pipeline_queue</span><span class=o>.</span><span class=n>get_jobs</span><span class=p>():</span>

            <span class=n>unreal</span><span class=o>.</span><span class=n>log</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;Submitting Job `</span><span class=si>{</span><span class=n>job</span><span class=o>.</span><span class=n>job_name</span><span class=si>}</span><span class=s2>` to Deadline...&quot;</span><span class=p>)</span>

            <span class=k>try</span><span class=p>:</span>
                <span class=c1># Create a Deadline job object with the default project level</span>
                <span class=c1># job info and plugin info</span>
                <span class=n>deadline_job</span> <span class=o>=</span> <span class=n>DeadlineJob</span><span class=p>(</span><span class=n>project_job_info</span><span class=p>,</span> <span class=n>project_plugin_info</span><span class=p>)</span>

                <span class=n>deadline_job_id</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>submit_job</span><span class=p>(</span>
                    <span class=n>job</span><span class=p>,</span> <span class=n>deadline_job</span><span class=p>,</span> <span class=n>command_args</span><span class=p>,</span> <span class=n>deadline_service</span>
                <span class=p>)</span>

            <span class=k>except</span> <span class=ne>Exception</span> <span class=k>as</span> <span class=n>err</span><span class=p>:</span>
                <span class=n>unreal</span><span class=o>.</span><span class=n>log_error</span><span class=p>(</span>
                    <span class=sa>f</span><span class=s2>&quot;Failed to submit job `</span><span class=si>{</span><span class=n>job</span><span class=o>.</span><span class=n>job_name</span><span class=si>}</span><span class=s2>` to Deadline, aborting render. </span><span class=se>\n\t</span><span class=s2>Error: </span><span class=si>{</span><span class=nb>str</span><span class=p>(</span><span class=n>err</span><span class=p>)</span><span class=si>}</span><span class=s2>&quot;</span>
                <span class=p>)</span>
                <span class=n>unreal</span><span class=o>.</span><span class=n>log_error</span><span class=p>(</span><span class=n>traceback</span><span class=o>.</span><span class=n>format_exc</span><span class=p>())</span>
                <span class=bp>self</span><span class=o>.</span><span class=n>on_executor_errored_impl</span><span class=p>(</span><span class=kc>None</span><span class=p>,</span> <span class=kc>True</span><span class=p>,</span> <span class=nb>str</span><span class=p>(</span><span class=n>err</span><span class=p>))</span>
                <span class=n>unreal</span><span class=o>.</span><span class=n>EditorDialog</span><span class=o>.</span><span class=n>show_message</span><span class=p>(</span>
                    <span class=s2>&quot;Submission Result&quot;</span><span class=p>,</span>
                    <span class=sa>f</span><span class=s2>&quot;Failed to submit job `</span><span class=si>{</span><span class=n>job</span><span class=o>.</span><span class=n>job_name</span><span class=si>}</span><span class=s2>` to Deadline with error: </span><span class=si>{</span><span class=nb>str</span><span class=p>(</span><span class=n>err</span><span class=p>)</span><span class=si>}</span><span class=s2>. &quot;</span>
                    <span class=sa>f</span><span class=s2>&quot;See log for more details.&quot;</span><span class=p>,</span>
                    <span class=n>unreal</span><span class=o>.</span><span class=n>AppMsgType</span><span class=o>.</span><span class=n>OK</span><span class=p>,</span>
                <span class=p>)</span>
                <span class=bp>self</span><span class=o>.</span><span class=n>on_executor_finished_impl</span><span class=p>()</span>
                <span class=k>return</span>

            <span class=k>if</span> <span class=ow>not</span> <span class=n>deadline_job_id</span><span class=p>:</span>
                <span class=n>message</span> <span class=o>=</span> <span class=p>(</span>
                    <span class=sa>f</span><span class=s2>&quot;A problem occurred submitting `</span><span class=si>{</span><span class=n>job</span><span class=o>.</span><span class=n>job_name</span><span class=si>}</span><span class=s2>`. &quot;</span>
                    <span class=sa>f</span><span class=s2>&quot;Either the job doesn&#39;t have any data to submit, &quot;</span>
                    <span class=sa>f</span><span class=s2>&quot;or an error occurred getting the Deadline JobID. &quot;</span>
                    <span class=sa>f</span><span class=s2>&quot;This job status would not be reflected in the UI. &quot;</span>
                    <span class=sa>f</span><span class=s2>&quot;Check the logs for more details.&quot;</span>
                <span class=p>)</span>
                <span class=n>unreal</span><span class=o>.</span><span class=n>log_warning</span><span class=p>(</span><span class=n>message</span><span class=p>)</span>
                <span class=n>unreal</span><span class=o>.</span><span class=n>EditorDialog</span><span class=o>.</span><span class=n>show_message</span><span class=p>(</span>
                    <span class=s2>&quot;Submission Result&quot;</span><span class=p>,</span> <span class=n>message</span><span class=p>,</span> <span class=n>unreal</span><span class=o>.</span><span class=n>AppMsgType</span><span class=o>.</span><span class=n>OK</span>
                <span class=p>)</span>
                <span class=k>return</span>

            <span class=k>else</span><span class=p>:</span>
                <span class=n>unreal</span><span class=o>.</span><span class=n>log</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;Deadline JobId: </span><span class=si>{</span><span class=n>deadline_job_id</span><span class=si>}</span><span class=s2>&quot;</span><span class=p>)</span>
                <span class=bp>self</span><span class=o>.</span><span class=n>job_ids</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>deadline_job_id</span><span class=p>)</span>

                <span class=c1># Store the Deadline JobId in our job (the one that exists in</span>
                <span class=c1># the queue, not the duplicate) so we can match up Movie</span>
                <span class=c1># Pipeline jobs with status updates from Deadline.</span>
                <span class=n>job</span><span class=o>.</span><span class=n>user_data</span> <span class=o>=</span> <span class=n>deadline_job_id</span>

        <span class=c1># Now that we&#39;ve sent a job to Deadline, we&#39;re going to request a status</span>
        <span class=c1># update on them so that they transition from &quot;Ready&quot; to &quot;Queued&quot; or</span>
        <span class=c1># their actual status in Deadline. self.request_job_status_update(</span>
        <span class=c1># deadline_service)</span>

        <span class=n>message</span> <span class=o>=</span> <span class=p>(</span>
            <span class=sa>f</span><span class=s2>&quot;Successfully submitted </span><span class=si>{</span><span class=nb>len</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>job_ids</span><span class=p>)</span><span class=si>}</span><span class=s2> jobs to Deadline. JobIds: </span><span class=si>{</span><span class=s1>&#39;, &#39;</span><span class=o>.</span><span class=n>join</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>job_ids</span><span class=p>)</span><span class=si>}</span><span class=s2>. &quot;</span>
            <span class=sa>f</span><span class=s2>&quot;</span><span class=se>\n</span><span class=s2>Please use Deadline Monitor to track render job statuses&quot;</span>
        <span class=p>)</span>
        <span class=n>unreal</span><span class=o>.</span><span class=n>log</span><span class=p>(</span><span class=n>message</span><span class=p>)</span>

        <span class=n>unreal</span><span class=o>.</span><span class=n>EditorDialog</span><span class=o>.</span><span class=n>show_message</span><span class=p>(</span>
            <span class=s2>&quot;Submission Result&quot;</span><span class=p>,</span> <span class=n>message</span><span class=p>,</span> <span class=n>unreal</span><span class=o>.</span><span class=n>AppMsgType</span><span class=o>.</span><span class=n>OK</span>
        <span class=p>)</span>

        <span class=c1># Set the executor to finished</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>on_executor_finished_impl</span><span class=p>()</span>

    <span class=nd>@unreal</span><span class=o>.</span><span class=n>ufunction</span><span class=p>(</span><span class=n>override</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
    <span class=k>def</span><span class=w> </span><span class=nf>is_rendering</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=c1># Because we forward unfinished jobs onto another service when the</span>
        <span class=c1># button is pressed, they can always submit what is in the queue and</span>
        <span class=c1># there&#39;s no need to block the queue.</span>
        <span class=c1># A MoviePipelineExecutor implementation must override this. If you</span>
        <span class=c1># override a ufunction from a base class you don&#39;t specify the return</span>
        <span class=c1># type or parameter types.</span>
        <span class=k>return</span> <span class=kc>False</span>

    <span class=k>def</span><span class=w> </span><span class=nf>submit_job</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>job</span><span class=p>,</span> <span class=n>deadline_job</span><span class=p>,</span> <span class=n>command_args</span><span class=p>,</span> <span class=n>deadline_service</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;</span>
<span class=sd>        Submit a new Job to Deadline</span>
<span class=sd>        :param job: Queued job to submit</span>
<span class=sd>        :param deadline_job: Deadline job object</span>
<span class=sd>        :param list[str] command_args: Commandline arguments to configure for the Deadline Job</span>
<span class=sd>        :param deadline_service: An instance of the deadline service object</span>
<span class=sd>        :returns: Deadline Job ID</span>
<span class=sd>        :rtype: str</span>
<span class=sd>        &quot;&quot;&quot;</span>

        <span class=c1># Get the Job Info and plugin Info</span>
        <span class=c1># If we have a preset set on the job, get the deadline submission details</span>
        <span class=k>try</span><span class=p>:</span>
            <span class=n>job_info</span><span class=p>,</span> <span class=n>plugin_info</span> <span class=o>=</span> <span class=n>get_deadline_info_from_preset</span><span class=p>(</span><span class=n>job_preset_struct</span><span class=o>=</span><span class=n>job</span><span class=o>.</span><span class=n>get_deadline_job_preset_struct_with_overrides</span><span class=p>())</span>

        <span class=c1># Fail the submission if any errors occur</span>
        <span class=k>except</span> <span class=ne>Exception</span> <span class=k>as</span> <span class=n>err</span><span class=p>:</span>
            <span class=k>raise</span> <span class=ne>RuntimeError</span><span class=p>(</span>
                <span class=sa>f</span><span class=s2>&quot;An error occurred getting the deadline job and plugin &quot;</span>
                <span class=sa>f</span><span class=s2>&quot;details. </span><span class=se>\n\t</span><span class=s2>Error: </span><span class=si>{</span><span class=n>err</span><span class=si>}</span><span class=s2> &quot;</span>
            <span class=p>)</span>

        <span class=c1># check for required fields in pluginInfo</span>
        <span class=k>if</span> <span class=s2>&quot;Executable&quot;</span> <span class=ow>not</span> <span class=ow>in</span> <span class=n>plugin_info</span><span class=p>:</span>
            <span class=k>raise</span> <span class=ne>RuntimeError</span><span class=p>(</span><span class=s2>&quot;An error occurred formatting the Plugin Info string. </span><span class=se>\n\t</span><span class=s2>Missing </span><span class=se>\&quot;</span><span class=s2>Executable</span><span class=se>\&quot;</span><span class=s2> key&quot;</span><span class=p>)</span>
        <span class=k>elif</span> <span class=ow>not</span> <span class=n>plugin_info</span><span class=p>[</span><span class=s2>&quot;Executable&quot;</span><span class=p>]:</span>
            <span class=k>raise</span> <span class=ne>RuntimeError</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;An error occurred formatting the Plugin Info string. </span><span class=se>\n\t</span><span class=s2>Executable value cannot be empty&quot;</span><span class=p>)</span>
        <span class=k>if</span> <span class=s2>&quot;ProjectFile&quot;</span> <span class=ow>not</span> <span class=ow>in</span> <span class=n>plugin_info</span><span class=p>:</span>
            <span class=k>raise</span> <span class=ne>RuntimeError</span><span class=p>(</span><span class=s2>&quot;An error occurred formatting the Plugin Info string. </span><span class=se>\n\t</span><span class=s2>Missing </span><span class=se>\&quot;</span><span class=s2>ProjectFile</span><span class=se>\&quot;</span><span class=s2> key&quot;</span><span class=p>)</span>
        <span class=k>elif</span> <span class=ow>not</span> <span class=n>plugin_info</span><span class=p>[</span><span class=s2>&quot;ProjectFile&quot;</span><span class=p>]:</span>
            <span class=k>raise</span> <span class=ne>RuntimeError</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;An error occurred formatting the Plugin Info string. </span><span class=se>\n\t</span><span class=s2>ProjectFile value cannot be empty&quot;</span><span class=p>)</span>

        <span class=c1># Update the job info with overrides from the UI</span>
        <span class=k>if</span> <span class=n>job</span><span class=o>.</span><span class=n>batch_name</span><span class=p>:</span>
            <span class=n>job_info</span><span class=p>[</span><span class=s2>&quot;BatchName&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=n>job</span><span class=o>.</span><span class=n>batch_name</span>

        <span class=k>if</span> <span class=nb>hasattr</span><span class=p>(</span><span class=n>job</span><span class=p>,</span> <span class=s2>&quot;comment&quot;</span><span class=p>)</span> <span class=ow>and</span> <span class=ow>not</span> <span class=n>job_info</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;Comment&quot;</span><span class=p>):</span>
            <span class=n>job_info</span><span class=p>[</span><span class=s2>&quot;Comment&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=n>job</span><span class=o>.</span><span class=n>comment</span>

        <span class=k>if</span> <span class=ow>not</span> <span class=n>job_info</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;Name&quot;</span><span class=p>)</span> <span class=ow>or</span> <span class=n>job_info</span><span class=p>[</span><span class=s2>&quot;Name&quot;</span><span class=p>]</span> <span class=o>==</span> <span class=s2>&quot;Untitled&quot;</span><span class=p>:</span>
            <span class=n>job_info</span><span class=p>[</span><span class=s2>&quot;Name&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=n>job</span><span class=o>.</span><span class=n>job_name</span>

        <span class=k>if</span> <span class=n>job</span><span class=o>.</span><span class=n>author</span><span class=p>:</span>
            <span class=n>job_info</span><span class=p>[</span><span class=s2>&quot;UserName&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=n>job</span><span class=o>.</span><span class=n>author</span>

        <span class=k>if</span> <span class=n>unreal</span><span class=o>.</span><span class=n>Paths</span><span class=o>.</span><span class=n>is_project_file_path_set</span><span class=p>():</span>
            <span class=c1># Trim down to just &quot;Game.uproject&quot; instead of absolute path.</span>
            <span class=n>game_name_or_project_file</span> <span class=o>=</span> <span class=p>(</span>
                <span class=n>unreal</span><span class=o>.</span><span class=n>Paths</span><span class=o>.</span><span class=n>convert_relative_path_to_full</span><span class=p>(</span>
                    <span class=n>unreal</span><span class=o>.</span><span class=n>Paths</span><span class=o>.</span><span class=n>get_project_file_path</span><span class=p>()</span>
                <span class=p>)</span>
            <span class=p>)</span>

        <span class=k>else</span><span class=p>:</span>
            <span class=k>raise</span> <span class=ne>RuntimeError</span><span class=p>(</span>
                <span class=s2>&quot;Failed to get a project name. Please set a project!&quot;</span>
            <span class=p>)</span>

        <span class=c1># Create a new queue with only this job in it and save it to disk,</span>
        <span class=c1># then load it, so we can send it with the REST API</span>
        <span class=n>new_queue</span> <span class=o>=</span> <span class=n>unreal</span><span class=o>.</span><span class=n>MoviePipelineQueue</span><span class=p>()</span>
        <span class=n>new_job</span> <span class=o>=</span> <span class=n>new_queue</span><span class=o>.</span><span class=n>duplicate_job</span><span class=p>(</span><span class=n>job</span><span class=p>)</span>

        <span class=n>duplicated_queue</span><span class=p>,</span> <span class=n>manifest_path</span> <span class=o>=</span> <span class=n>unreal</span><span class=o>.</span><span class=n>MoviePipelineEditorLibrary</span><span class=o>.</span><span class=n>save_queue_to_manifest_file</span><span class=p>(</span>
            <span class=n>new_queue</span>
        <span class=p>)</span>

        <span class=c1># Convert the queue to text (load the serialized json from disk) so we</span>
        <span class=c1># can send it via deadline, and deadline will write the queue to the</span>
        <span class=c1># local machines on job startup.</span>
        <span class=n>serialized_pipeline</span> <span class=o>=</span> <span class=n>unreal</span><span class=o>.</span><span class=n>MoviePipelineEditorLibrary</span><span class=o>.</span><span class=n>convert_manifest_file_to_string</span><span class=p>(</span>
            <span class=n>manifest_path</span>
        <span class=p>)</span>

        <span class=c1># Loop through our settings in the job and let them modify the command</span>
        <span class=c1># line arguments/params.</span>
        <span class=n>new_job</span><span class=o>.</span><span class=n>get_configuration</span><span class=p>()</span><span class=o>.</span><span class=n>initialize_transient_settings</span><span class=p>()</span>
        <span class=c1># Look for our Game Override setting to pull the game mode to start</span>
        <span class=c1># with. We start with this game mode even on a blank map to override</span>
        <span class=c1># the project default from kicking in.</span>
        <span class=n>game_override_class</span> <span class=o>=</span> <span class=kc>None</span>

        <span class=n>out_url_params</span> <span class=o>=</span> <span class=p>[]</span>
        <span class=n>out_command_line_args</span> <span class=o>=</span> <span class=p>[]</span>
        <span class=n>out_device_profile_cvars</span> <span class=o>=</span> <span class=p>[]</span>
        <span class=n>out_exec_cmds</span> <span class=o>=</span> <span class=p>[]</span>
        <span class=k>for</span> <span class=n>setting</span> <span class=ow>in</span> <span class=n>new_job</span><span class=o>.</span><span class=n>get_configuration</span><span class=p>()</span><span class=o>.</span><span class=n>get_all_settings</span><span class=p>():</span>

            <span class=n>out_url_params</span><span class=p>,</span> <span class=n>out_command_line_args</span><span class=p>,</span> <span class=n>out_device_profile_cvars</span><span class=p>,</span> <span class=n>out_exec_cmds</span> <span class=o>=</span> <span class=n>setting</span><span class=o>.</span><span class=n>build_new_process_command_line_args</span><span class=p>(</span>
                <span class=n>out_url_params</span><span class=p>,</span>
                <span class=n>out_command_line_args</span><span class=p>,</span>
                <span class=n>out_device_profile_cvars</span><span class=p>,</span>
                <span class=n>out_exec_cmds</span><span class=p>,</span>
            <span class=p>)</span>

            <span class=c1># Set the game override</span>
            <span class=k>if</span> <span class=n>setting</span><span class=o>.</span><span class=n>get_class</span><span class=p>()</span> <span class=o>==</span> <span class=n>unreal</span><span class=o>.</span><span class=n>MoviePipelineGameOverrideSetting</span><span class=o>.</span><span class=n>static_class</span><span class=p>():</span>
                <span class=n>game_override_class</span> <span class=o>=</span> <span class=n>setting</span><span class=o>.</span><span class=n>game_mode_override</span>

        <span class=c1># This triggers the editor to start looking for render jobs when it</span>
        <span class=c1># finishes loading.</span>
        <span class=n>out_exec_cmds</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=s2>&quot;py mrq_rpc.py&quot;</span><span class=p>)</span>

        <span class=c1># Convert the arrays of command line args, device profile cvars,</span>
        <span class=c1># and exec cmds into actual commands for our command line.</span>
        <span class=n>command_args</span><span class=o>.</span><span class=n>extend</span><span class=p>(</span><span class=n>out_command_line_args</span><span class=p>)</span>

        <span class=k>if</span> <span class=n>out_device_profile_cvars</span><span class=p>:</span>
            <span class=c1># -dpcvars=&quot;arg0,arg1,...&quot;</span>
            <span class=n>command_args</span><span class=o>.</span><span class=n>append</span><span class=p>(</span>
                <span class=s1>&#39;-dpcvars=&quot;</span><span class=si>{dpcvars}</span><span class=s1>&quot;&#39;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span>
                    <span class=n>dpcvars</span><span class=o>=</span><span class=s2>&quot;,&quot;</span><span class=o>.</span><span class=n>join</span><span class=p>(</span><span class=n>out_device_profile_cvars</span><span class=p>)</span>
                <span class=p>)</span>
            <span class=p>)</span>

        <span class=k>if</span> <span class=n>out_exec_cmds</span><span class=p>:</span>
            <span class=c1># -execcmds=&quot;cmd0,cmd1,...&quot;</span>
            <span class=n>command_args</span><span class=o>.</span><span class=n>append</span><span class=p>(</span>
                <span class=s1>&#39;-execcmds=&quot;</span><span class=si>{cmds}</span><span class=s1>&quot;&#39;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=n>cmds</span><span class=o>=</span><span class=s2>&quot;,&quot;</span><span class=o>.</span><span class=n>join</span><span class=p>(</span><span class=n>out_exec_cmds</span><span class=p>))</span>
            <span class=p>)</span>

        <span class=c1># Add support for telling the remote process to wait for the</span>
        <span class=c1># asset registry to complete synchronously</span>
        <span class=n>command_args</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=s2>&quot;-waitonassetregistry&quot;</span><span class=p>)</span>

        <span class=c1># Build a shot-mask from this sequence, to split into the appropriate</span>
        <span class=c1># number of tasks. Remove any already-disabled shots before we</span>
        <span class=c1># generate a list, otherwise we make unneeded tasks which get sent to</span>
        <span class=c1># machines</span>
        <span class=n>shots_to_render</span> <span class=o>=</span> <span class=p>[]</span>
        <span class=k>for</span> <span class=n>shot_index</span><span class=p>,</span> <span class=n>shot</span> <span class=ow>in</span> <span class=nb>enumerate</span><span class=p>(</span><span class=n>new_job</span><span class=o>.</span><span class=n>shot_info</span><span class=p>):</span>
            <span class=k>if</span> <span class=ow>not</span> <span class=n>shot</span><span class=o>.</span><span class=n>enabled</span><span class=p>:</span>
                <span class=n>unreal</span><span class=o>.</span><span class=n>log</span><span class=p>(</span>
                    <span class=sa>f</span><span class=s2>&quot;Skipped submitting shot </span><span class=si>{</span><span class=n>shot_index</span><span class=si>}</span><span class=s2> in </span><span class=si>{</span><span class=n>job</span><span class=o>.</span><span class=n>job_name</span><span class=si>}</span><span class=s2> &quot;</span>
                    <span class=sa>f</span><span class=s2>&quot;to server due to being already disabled!&quot;</span>
                <span class=p>)</span>
            <span class=k>else</span><span class=p>:</span>
                <span class=n>shots_to_render</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>shot</span><span class=o>.</span><span class=n>outer_name</span><span class=p>)</span>

        <span class=c1># If there are no shots enabled,</span>
        <span class=c1># &quot;these are not the droids we are looking for&quot;, move along ;)</span>
        <span class=c1># We will catch this later and deal with it</span>
        <span class=k>if</span> <span class=ow>not</span> <span class=n>shots_to_render</span><span class=p>:</span>
            <span class=n>unreal</span><span class=o>.</span><span class=n>log_warning</span><span class=p>(</span><span class=s2>&quot;No shots enabled in shot mask, not submitting.&quot;</span><span class=p>)</span>
            <span class=k>return</span>

        <span class=c1># Divide the job to render by the chunk size</span>
        <span class=c1># i.e {&quot;O&quot;: &quot;my_new_shot&quot;} or {&quot;0&quot;, &quot;shot_1,shot_2,shot_4&quot;}</span>
        <span class=n>chunk_size</span> <span class=o>=</span> <span class=nb>int</span><span class=p>(</span><span class=n>job_info</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;ChunkSize&quot;</span><span class=p>,</span> <span class=mi>1</span><span class=p>))</span>
        <span class=n>shots</span> <span class=o>=</span> <span class=p>{}</span>
        <span class=n>frame_list</span> <span class=o>=</span> <span class=p>[]</span>
        <span class=k>for</span> <span class=n>index</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=mi>0</span><span class=p>,</span> <span class=nb>len</span><span class=p>(</span><span class=n>shots_to_render</span><span class=p>),</span> <span class=n>chunk_size</span><span class=p>):</span>

            <span class=n>shots</span><span class=p>[</span><span class=nb>str</span><span class=p>(</span><span class=n>index</span><span class=p>)]</span> <span class=o>=</span> <span class=s2>&quot;,&quot;</span><span class=o>.</span><span class=n>join</span><span class=p>(</span><span class=n>shots_to_render</span><span class=p>[</span><span class=n>index</span> <span class=p>:</span> <span class=n>index</span> <span class=o>+</span> <span class=n>chunk_size</span><span class=p>])</span>

            <span class=n>frame_list</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=nb>str</span><span class=p>(</span><span class=n>index</span><span class=p>))</span>

        <span class=n>job_info</span><span class=p>[</span><span class=s2>&quot;Frames&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=s2>&quot;,&quot;</span><span class=o>.</span><span class=n>join</span><span class=p>(</span><span class=n>frame_list</span><span class=p>)</span>

        <span class=c1># Get the current index of the ExtraInfoKeyValue pair, we will</span>
        <span class=c1># increment the index, so we do not stomp other settings</span>
        <span class=n>extra_info_key_indexs</span> <span class=o>=</span> <span class=nb>set</span><span class=p>()</span>
        <span class=k>for</span> <span class=n>key</span> <span class=ow>in</span> <span class=n>job_info</span><span class=o>.</span><span class=n>keys</span><span class=p>():</span>
            <span class=k>if</span> <span class=n>key</span><span class=o>.</span><span class=n>startswith</span><span class=p>(</span><span class=s2>&quot;ExtraInfoKeyValue&quot;</span><span class=p>):</span>
                <span class=n>_</span><span class=p>,</span> <span class=n>index</span> <span class=o>=</span> <span class=n>key</span><span class=o>.</span><span class=n>split</span><span class=p>(</span><span class=s2>&quot;ExtraInfoKeyValue&quot;</span><span class=p>)</span>
                <span class=n>extra_info_key_indexs</span><span class=o>.</span><span class=n>add</span><span class=p>(</span><span class=nb>int</span><span class=p>(</span><span class=n>index</span><span class=p>))</span>

        <span class=c1># Get the highest number in the index list and increment the number</span>
        <span class=c1># by one</span>
        <span class=n>current_index</span> <span class=o>=</span> <span class=nb>max</span><span class=p>(</span><span class=n>extra_info_key_indexs</span><span class=p>)</span> <span class=o>+</span> <span class=mi>1</span> <span class=k>if</span> <span class=n>extra_info_key_indexs</span> <span class=k>else</span> <span class=mi>0</span>

        <span class=c1># Put the serialized Queue into the Job data but hidden from</span>
        <span class=c1># Deadline UI</span>
        <span class=n>job_info</span><span class=p>[</span><span class=sa>f</span><span class=s2>&quot;ExtraInfoKeyValue</span><span class=si>{</span><span class=n>current_index</span><span class=si>}</span><span class=s2>&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=sa>f</span><span class=s2>&quot;serialized_pipeline=</span><span class=si>{</span><span class=n>serialized_pipeline</span><span class=si>}</span><span class=s2>&quot;</span>

        <span class=c1># Increment the index</span>
        <span class=n>current_index</span> <span class=o>+=</span> <span class=mi>1</span>

        <span class=c1># Put the shot info in the job extra info keys</span>
        <span class=n>job_info</span><span class=p>[</span><span class=sa>f</span><span class=s2>&quot;ExtraInfoKeyValue</span><span class=si>{</span><span class=n>current_index</span><span class=si>}</span><span class=s2>&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=sa>f</span><span class=s2>&quot;shot_info=</span><span class=si>{</span><span class=n>json</span><span class=o>.</span><span class=n>dumps</span><span class=p>(</span><span class=n>shots</span><span class=p>)</span><span class=si>}</span><span class=s2>&quot;</span>
        <span class=n>current_index</span> <span class=o>+=</span> <span class=mi>1</span>

        <span class=c1># Set the job output directory override on the deadline job</span>
        <span class=k>if</span> <span class=nb>hasattr</span><span class=p>(</span><span class=n>new_job</span><span class=p>,</span> <span class=s2>&quot;output_directory_override&quot;</span><span class=p>):</span>
            <span class=k>if</span> <span class=n>new_job</span><span class=o>.</span><span class=n>output_directory_override</span><span class=o>.</span><span class=n>path</span><span class=p>:</span>
                <span class=n>job_info</span><span class=p>[</span><span class=sa>f</span><span class=s2>&quot;ExtraInfoKeyValue</span><span class=si>{</span><span class=n>current_index</span><span class=si>}</span><span class=s2>&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=sa>f</span><span class=s2>&quot;output_directory_override=</span><span class=si>{</span><span class=n>new_job</span><span class=o>.</span><span class=n>output_directory_override</span><span class=o>.</span><span class=n>path</span><span class=si>}</span><span class=s2>&quot;</span>

                <span class=n>current_index</span> <span class=o>+=</span> <span class=mi>1</span>

        <span class=c1># Set the job filename format override on the deadline job</span>
        <span class=k>if</span> <span class=nb>hasattr</span><span class=p>(</span><span class=n>new_job</span><span class=p>,</span> <span class=s2>&quot;filename_format_override&quot;</span><span class=p>):</span>
            <span class=k>if</span> <span class=n>new_job</span><span class=o>.</span><span class=n>filename_format_override</span><span class=p>:</span>
                <span class=n>job_info</span><span class=p>[</span><span class=sa>f</span><span class=s2>&quot;ExtraInfoKeyValue</span><span class=si>{</span><span class=n>current_index</span><span class=si>}</span><span class=s2>&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=sa>f</span><span class=s2>&quot;filename_format_override=</span><span class=si>{</span><span class=n>new_job</span><span class=o>.</span><span class=n>filename_format_override</span><span class=si>}</span><span class=s2>&quot;</span>

                <span class=n>current_index</span> <span class=o>+=</span> <span class=mi>1</span>

        <span class=c1># Build the command line arguments the remote machine will use.</span>
        <span class=c1># The Deadline plugin will provide the executable since it is local to</span>
        <span class=c1># the machine. It will also write out queue manifest to the correct</span>
        <span class=c1># location relative to the Saved folder</span>

        <span class=c1># Get the current commandline args from the plugin info</span>
        <span class=n>plugin_info_cmd_args</span> <span class=o>=</span> <span class=p>[</span><span class=n>plugin_info</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;CommandLineArguments&quot;</span><span class=p>,</span> <span class=s2>&quot;&quot;</span><span class=p>)]</span>

        <span class=k>if</span> <span class=ow>not</span> <span class=n>plugin_info</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;ProjectFile&quot;</span><span class=p>):</span>
            <span class=n>project_file</span> <span class=o>=</span> <span class=n>plugin_info</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;ProjectFile&quot;</span><span class=p>,</span> <span class=n>game_name_or_project_file</span><span class=p>)</span>
            <span class=n>plugin_info</span><span class=p>[</span><span class=s2>&quot;ProjectFile&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=n>project_file</span>

        <span class=c1># This is the map included in the plugin to boot up to.</span>
        <span class=n>project_cmd_args</span> <span class=o>=</span> <span class=p>[</span>
            <span class=sa>f</span><span class=s2>&quot;MoviePipelineEntryMap?game=</span><span class=si>{</span><span class=n>game_override_class</span><span class=o>.</span><span class=n>get_path_name</span><span class=p>()</span><span class=si>}</span><span class=s2>&quot;</span>
        <span class=p>]</span>

        <span class=c1># Combine all the compiled arguments</span>
        <span class=n>full_cmd_args</span> <span class=o>=</span> <span class=n>project_cmd_args</span> <span class=o>+</span> <span class=n>command_args</span> <span class=o>+</span> <span class=n>plugin_info_cmd_args</span>

        <span class=c1># Remove any duplicates in the commandline args and convert to a string</span>
        <span class=n>full_cmd_args</span> <span class=o>=</span> <span class=s2>&quot; &quot;</span><span class=o>.</span><span class=n>join</span><span class=p>(</span><span class=nb>list</span><span class=p>(</span><span class=n>OrderedDict</span><span class=o>.</span><span class=n>fromkeys</span><span class=p>(</span><span class=n>full_cmd_args</span><span class=p>)))</span><span class=o>.</span><span class=n>strip</span><span class=p>()</span>

        <span class=n>unreal</span><span class=o>.</span><span class=n>log</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;Deadline job command line args: </span><span class=si>{</span><span class=n>full_cmd_args</span><span class=si>}</span><span class=s2>&quot;</span><span class=p>)</span>

        <span class=c1># Update the plugin info with the commandline arguments</span>
        <span class=n>plugin_info</span><span class=o>.</span><span class=n>update</span><span class=p>(</span>
            <span class=p>{</span>
                <span class=s2>&quot;CommandLineArguments&quot;</span><span class=p>:</span> <span class=n>full_cmd_args</span><span class=p>,</span>
                <span class=s2>&quot;CommandLineMode&quot;</span><span class=p>:</span> <span class=s2>&quot;false&quot;</span><span class=p>,</span>
            <span class=p>}</span>
        <span class=p>)</span>

        <span class=n>deadline_job</span><span class=o>.</span><span class=n>job_info</span> <span class=o>=</span> <span class=n>job_info</span>
        <span class=n>deadline_job</span><span class=o>.</span><span class=n>plugin_info</span> <span class=o>=</span> <span class=n>plugin_info</span>

        <span class=c1># Submit the deadline job</span>
        <span class=k>return</span> <span class=n>deadline_service</span><span class=o>.</span><span class=n>submit_job</span><span class=p>(</span><span class=n>deadline_job</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> <div class="doc doc-children"> <div class="doc doc-object doc-function"> <h3 id=client.ayon_deadline.repository.custom.plugins.UnrealEngine5.UnrealEnginePlugins.MoviePipelineDeadline.Content.Python.remote_executor.MoviePipelineDeadlineRemoteExecutor.execute class="doc doc-heading"> <code class="highlight language-python"><span class=n>execute</span><span class=p>(</span><span class=n>pipeline_queue</span><span class=p>)</span></code> </h3> <div class="doc doc-contents "> <p>This is called when the user presses Render (Remote) in the UI. We will split the queue up into multiple jobs. Each job will be submitted to deadline separately, with each shot within the job split into one Deadline task per shot.</p> <details class=quote> <summary>Source code in <code>client/ayon_deadline/repository/custom/plugins/UnrealEngine5/UnrealEnginePlugins/MoviePipelineDeadline/Content/Python/remote_executor.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 31</span>
<span class=normal> 32</span>
<span class=normal> 33</span>
<span class=normal> 34</span>
<span class=normal> 35</span>
<span class=normal> 36</span>
<span class=normal> 37</span>
<span class=normal> 38</span>
<span class=normal> 39</span>
<span class=normal> 40</span>
<span class=normal> 41</span>
<span class=normal> 42</span>
<span class=normal> 43</span>
<span class=normal> 44</span>
<span class=normal> 45</span>
<span class=normal> 46</span>
<span class=normal> 47</span>
<span class=normal> 48</span>
<span class=normal> 49</span>
<span class=normal> 50</span>
<span class=normal> 51</span>
<span class=normal> 52</span>
<span class=normal> 53</span>
<span class=normal> 54</span>
<span class=normal> 55</span>
<span class=normal> 56</span>
<span class=normal> 57</span>
<span class=normal> 58</span>
<span class=normal> 59</span>
<span class=normal> 60</span>
<span class=normal> 61</span>
<span class=normal> 62</span>
<span class=normal> 63</span>
<span class=normal> 64</span>
<span class=normal> 65</span>
<span class=normal> 66</span>
<span class=normal> 67</span>
<span class=normal> 68</span>
<span class=normal> 69</span>
<span class=normal> 70</span>
<span class=normal> 71</span>
<span class=normal> 72</span>
<span class=normal> 73</span>
<span class=normal> 74</span>
<span class=normal> 75</span>
<span class=normal> 76</span>
<span class=normal> 77</span>
<span class=normal> 78</span>
<span class=normal> 79</span>
<span class=normal> 80</span>
<span class=normal> 81</span>
<span class=normal> 82</span>
<span class=normal> 83</span>
<span class=normal> 84</span>
<span class=normal> 85</span>
<span class=normal> 86</span>
<span class=normal> 87</span>
<span class=normal> 88</span>
<span class=normal> 89</span>
<span class=normal> 90</span>
<span class=normal> 91</span>
<span class=normal> 92</span>
<span class=normal> 93</span>
<span class=normal> 94</span>
<span class=normal> 95</span>
<span class=normal> 96</span>
<span class=normal> 97</span>
<span class=normal> 98</span>
<span class=normal> 99</span>
<span class=normal>100</span>
<span class=normal>101</span>
<span class=normal>102</span>
<span class=normal>103</span>
<span class=normal>104</span>
<span class=normal>105</span>
<span class=normal>106</span>
<span class=normal>107</span>
<span class=normal>108</span>
<span class=normal>109</span>
<span class=normal>110</span>
<span class=normal>111</span>
<span class=normal>112</span>
<span class=normal>113</span>
<span class=normal>114</span>
<span class=normal>115</span>
<span class=normal>116</span>
<span class=normal>117</span>
<span class=normal>118</span>
<span class=normal>119</span>
<span class=normal>120</span>
<span class=normal>121</span>
<span class=normal>122</span>
<span class=normal>123</span>
<span class=normal>124</span>
<span class=normal>125</span>
<span class=normal>126</span>
<span class=normal>127</span>
<span class=normal>128</span>
<span class=normal>129</span>
<span class=normal>130</span>
<span class=normal>131</span>
<span class=normal>132</span>
<span class=normal>133</span>
<span class=normal>134</span>
<span class=normal>135</span>
<span class=normal>136</span>
<span class=normal>137</span>
<span class=normal>138</span>
<span class=normal>139</span>
<span class=normal>140</span>
<span class=normal>141</span>
<span class=normal>142</span>
<span class=normal>143</span>
<span class=normal>144</span>
<span class=normal>145</span>
<span class=normal>146</span>
<span class=normal>147</span>
<span class=normal>148</span>
<span class=normal>149</span>
<span class=normal>150</span>
<span class=normal>151</span>
<span class=normal>152</span>
<span class=normal>153</span>
<span class=normal>154</span>
<span class=normal>155</span>
<span class=normal>156</span>
<span class=normal>157</span>
<span class=normal>158</span>
<span class=normal>159</span>
<span class=normal>160</span>
<span class=normal>161</span>
<span class=normal>162</span>
<span class=normal>163</span>
<span class=normal>164</span>
<span class=normal>165</span>
<span class=normal>166</span>
<span class=normal>167</span>
<span class=normal>168</span>
<span class=normal>169</span>
<span class=normal>170</span>
<span class=normal>171</span>
<span class=normal>172</span>
<span class=normal>173</span>
<span class=normal>174</span>
<span class=normal>175</span>
<span class=normal>176</span>
<span class=normal>177</span>
<span class=normal>178</span>
<span class=normal>179</span>
<span class=normal>180</span>
<span class=normal>181</span>
<span class=normal>182</span>
<span class=normal>183</span>
<span class=normal>184</span>
<span class=normal>185</span>
<span class=normal>186</span>
<span class=normal>187</span>
<span class=normal>188</span>
<span class=normal>189</span>
<span class=normal>190</span>
<span class=normal>191</span>
<span class=normal>192</span>
<span class=normal>193</span>
<span class=normal>194</span>
<span class=normal>195</span>
<span class=normal>196</span>
<span class=normal>197</span>
<span class=normal>198</span>
<span class=normal>199</span>
<span class=normal>200</span>
<span class=normal>201</span>
<span class=normal>202</span>
<span class=normal>203</span>
<span class=normal>204</span>
<span class=normal>205</span>
<span class=normal>206</span>
<span class=normal>207</span>
<span class=normal>208</span>
<span class=normal>209</span>
<span class=normal>210</span>
<span class=normal>211</span>
<span class=normal>212</span>
<span class=normal>213</span>
<span class=normal>214</span>
<span class=normal>215</span>
<span class=normal>216</span>
<span class=normal>217</span>
<span class=normal>218</span>
<span class=normal>219</span>
<span class=normal>220</span>
<span class=normal>221</span>
<span class=normal>222</span>
<span class=normal>223</span>
<span class=normal>224</span>
<span class=normal>225</span>
<span class=normal>226</span>
<span class=normal>227</span>
<span class=normal>228</span>
<span class=normal>229</span></pre></div></td><td class=code><div><pre><span></span><code><span class=nd>@unreal</span><span class=o>.</span><span class=n>ufunction</span><span class=p>(</span><span class=n>override</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
<span class=k>def</span><span class=w> </span><span class=nf>execute</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>pipeline_queue</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;</span>
<span class=sd>    This is called when the user presses Render (Remote) in the UI. We will</span>
<span class=sd>    split the queue up into multiple jobs. Each job will be submitted to</span>
<span class=sd>    deadline separately, with each shot within the job split into one Deadline</span>
<span class=sd>    task per shot.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=n>unreal</span><span class=o>.</span><span class=n>log</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;Asked to execute Queue: </span><span class=si>{</span><span class=n>pipeline_queue</span><span class=si>}</span><span class=s2>&quot;</span><span class=p>)</span>
    <span class=n>unreal</span><span class=o>.</span><span class=n>log</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;Queue has </span><span class=si>{</span><span class=nb>len</span><span class=p>(</span><span class=n>pipeline_queue</span><span class=o>.</span><span class=n>get_jobs</span><span class=p>())</span><span class=si>}</span><span class=s2> jobs&quot;</span><span class=p>)</span>

    <span class=c1># Don&#39;t try to process empty/null Queues, no need to send them to</span>
    <span class=c1># Deadline.</span>
    <span class=k>if</span> <span class=ow>not</span> <span class=n>pipeline_queue</span> <span class=ow>or</span> <span class=p>(</span><span class=ow>not</span> <span class=n>pipeline_queue</span><span class=o>.</span><span class=n>get_jobs</span><span class=p>()):</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>on_executor_finished_impl</span><span class=p>()</span>
        <span class=k>return</span>

    <span class=c1># The user must save their work and check it in so that Deadline</span>
    <span class=c1># can sync it.</span>
    <span class=n>dirty_packages</span> <span class=o>=</span> <span class=p>[]</span>
    <span class=n>dirty_packages</span><span class=o>.</span><span class=n>extend</span><span class=p>(</span>
        <span class=n>unreal</span><span class=o>.</span><span class=n>EditorLoadingAndSavingUtils</span><span class=o>.</span><span class=n>get_dirty_content_packages</span><span class=p>()</span>
    <span class=p>)</span>
    <span class=n>dirty_packages</span><span class=o>.</span><span class=n>extend</span><span class=p>(</span>
        <span class=n>unreal</span><span class=o>.</span><span class=n>EditorLoadingAndSavingUtils</span><span class=o>.</span><span class=n>get_dirty_map_packages</span><span class=p>()</span>
    <span class=p>)</span>

    <span class=c1># Sometimes the dialog will return `False`</span>
    <span class=c1># even when there are no packages to save. so we are</span>
    <span class=c1># being explict about the packages we need to save</span>
    <span class=k>if</span> <span class=n>dirty_packages</span><span class=p>:</span>
        <span class=k>if</span> <span class=ow>not</span> <span class=n>unreal</span><span class=o>.</span><span class=n>EditorLoadingAndSavingUtils</span><span class=o>.</span><span class=n>save_dirty_packages_with_dialog</span><span class=p>(</span>
            <span class=kc>True</span><span class=p>,</span> <span class=kc>True</span>
        <span class=p>):</span>
            <span class=n>message</span> <span class=o>=</span> <span class=p>(</span>
                <span class=s2>&quot;One or more jobs in the queue have an unsaved map/content. &quot;</span>
                <span class=s2>&quot;</span><span class=si>{packages}</span><span class=s2> &quot;</span>
                <span class=s2>&quot;Please save and check-in all work before submission.&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span>
                    <span class=n>packages</span><span class=o>=</span><span class=s2>&quot;</span><span class=se>\n</span><span class=s2>&quot;</span><span class=o>.</span><span class=n>join</span><span class=p>(</span><span class=n>dirty_packages</span><span class=p>)</span>
                <span class=p>)</span>
            <span class=p>)</span>

            <span class=n>unreal</span><span class=o>.</span><span class=n>log_error</span><span class=p>(</span><span class=n>message</span><span class=p>)</span>
            <span class=n>unreal</span><span class=o>.</span><span class=n>EditorDialog</span><span class=o>.</span><span class=n>show_message</span><span class=p>(</span>
                <span class=s2>&quot;Unsaved Maps/Content&quot;</span><span class=p>,</span> <span class=n>message</span><span class=p>,</span> <span class=n>unreal</span><span class=o>.</span><span class=n>AppMsgType</span><span class=o>.</span><span class=n>OK</span>
            <span class=p>)</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>on_executor_finished_impl</span><span class=p>()</span>
            <span class=k>return</span>

    <span class=c1># Make sure all the maps in the queue exist on disk somewhere,</span>
    <span class=c1># unsaved maps can&#39;t be loaded on the remote machine, and it&#39;s common</span>
    <span class=c1># to have the wrong map name if you submit without loading the map.</span>
    <span class=n>has_valid_map</span> <span class=o>=</span> <span class=p>(</span>
        <span class=n>unreal</span><span class=o>.</span><span class=n>MoviePipelineEditorLibrary</span><span class=o>.</span><span class=n>is_map_valid_for_remote_render</span><span class=p>(</span>
            <span class=n>pipeline_queue</span><span class=o>.</span><span class=n>get_jobs</span><span class=p>()</span>
        <span class=p>)</span>
    <span class=p>)</span>
    <span class=k>if</span> <span class=ow>not</span> <span class=n>has_valid_map</span><span class=p>:</span>
        <span class=n>message</span> <span class=o>=</span> <span class=p>(</span>
            <span class=s2>&quot;One or more jobs in the queue have an unsaved map as &quot;</span>
            <span class=s2>&quot;their target map. &quot;</span>
            <span class=s2>&quot;These unsaved maps cannot be loaded by an external process, &quot;</span>
            <span class=s2>&quot;and the render has been aborted.&quot;</span>
        <span class=p>)</span>
        <span class=n>unreal</span><span class=o>.</span><span class=n>log_error</span><span class=p>(</span><span class=n>message</span><span class=p>)</span>
        <span class=n>unreal</span><span class=o>.</span><span class=n>EditorDialog</span><span class=o>.</span><span class=n>show_message</span><span class=p>(</span>
            <span class=s2>&quot;Unsaved Maps&quot;</span><span class=p>,</span> <span class=n>message</span><span class=p>,</span> <span class=n>unreal</span><span class=o>.</span><span class=n>AppMsgType</span><span class=o>.</span><span class=n>OK</span>
        <span class=p>)</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>on_executor_finished_impl</span><span class=p>()</span>
        <span class=k>return</span>

    <span class=bp>self</span><span class=o>.</span><span class=n>pipeline_queue</span> <span class=o>=</span> <span class=n>pipeline_queue</span>

    <span class=n>deadline_settings</span> <span class=o>=</span> <span class=n>unreal</span><span class=o>.</span><span class=n>get_default_object</span><span class=p>(</span>
        <span class=n>unreal</span><span class=o>.</span><span class=n>MoviePipelineDeadlineSettings</span>
    <span class=p>)</span>

    <span class=c1># Arguments to pass to the executable. This can be modified by settings</span>
    <span class=c1># in the event a setting needs to be applied early.</span>
    <span class=c1># In the format of -foo -bar</span>
    <span class=c1># commandLineArgs = &quot;&quot;</span>
    <span class=n>command_args</span> <span class=o>=</span> <span class=p>[]</span>

    <span class=c1># Append all of our inherited command line arguments from the editor.</span>
    <span class=n>in_process_executor_settings</span> <span class=o>=</span> <span class=n>unreal</span><span class=o>.</span><span class=n>get_default_object</span><span class=p>(</span>
        <span class=n>unreal</span><span class=o>.</span><span class=n>MoviePipelineInProcessExecutorSettings</span>
    <span class=p>)</span>
    <span class=n>inherited_cmds</span> <span class=o>=</span> <span class=n>in_process_executor_settings</span><span class=o>.</span><span class=n>inherited_command_line_arguments</span>

    <span class=c1># Sanitize the commandline by removing any execcmds that may</span>
    <span class=c1># have passed through the commandline.</span>
    <span class=c1># We remove the execcmds because, in some cases, users may execute a</span>
    <span class=c1># script that is local to their editor build for some automated</span>
    <span class=c1># workflow but this is not ideal on the farm. We will expect all</span>
    <span class=c1># custom startup commands for rendering to go through the `Start</span>
    <span class=c1># Command` in the MRQ settings.</span>
    <span class=n>inherited_cmds</span> <span class=o>=</span> <span class=n>re</span><span class=o>.</span><span class=n>sub</span><span class=p>(</span>
        <span class=s2>&quot;.*(?P&lt;cmds&gt;-execcmds=[\s\S]+[</span><span class=se>\&#39;\&quot;</span><span class=s2>])&quot;</span><span class=p>,</span>
        <span class=s2>&quot;&quot;</span><span class=p>,</span>
        <span class=n>inherited_cmds</span>
    <span class=p>)</span>

    <span class=n>command_args</span><span class=o>.</span><span class=n>extend</span><span class=p>(</span><span class=n>inherited_cmds</span><span class=o>.</span><span class=n>split</span><span class=p>(</span><span class=s2>&quot; &quot;</span><span class=p>))</span>
    <span class=n>command_args</span><span class=o>.</span><span class=n>extend</span><span class=p>(</span>
        <span class=n>in_process_executor_settings</span><span class=o>.</span><span class=n>additional_command_line_arguments</span><span class=o>.</span><span class=n>split</span><span class=p>(</span>
            <span class=s2>&quot; &quot;</span>
        <span class=p>)</span>
    <span class=p>)</span>

    <span class=n>command_args</span><span class=o>.</span><span class=n>extend</span><span class=p>(</span>
        <span class=p>[</span><span class=s2>&quot;-nohmd&quot;</span><span class=p>,</span> <span class=s2>&quot;-windowed&quot;</span><span class=p>,</span> <span class=sa>f</span><span class=s2>&quot;-ResX=1280&quot;</span><span class=p>,</span> <span class=sa>f</span><span class=s2>&quot;-ResY=720&quot;</span><span class=p>]</span>
    <span class=p>)</span>

    <span class=c1># Get the project level preset</span>
    <span class=n>project_preset</span> <span class=o>=</span> <span class=n>deadline_settings</span><span class=o>.</span><span class=n>default_job_preset</span>

    <span class=c1># Get the job and plugin info string.</span>
    <span class=c1># Note:</span>
    <span class=c1>#   Sometimes a project level default may not be set,</span>
    <span class=c1>#   so if this returns an empty dictionary, that is okay</span>
    <span class=c1>#   as we primarily care about the job level preset.</span>
    <span class=c1>#   Catch any exceptions here and continue</span>
    <span class=k>try</span><span class=p>:</span>
        <span class=n>project_job_info</span><span class=p>,</span> <span class=n>project_plugin_info</span> <span class=o>=</span> <span class=n>get_deadline_info_from_preset</span><span class=p>(</span><span class=n>job_preset</span><span class=o>=</span><span class=n>project_preset</span><span class=p>)</span>

    <span class=k>except</span> <span class=ne>Exception</span><span class=p>:</span>
        <span class=k>pass</span>

    <span class=n>deadline_service</span> <span class=o>=</span> <span class=n>get_global_deadline_service_instance</span><span class=p>()</span>

    <span class=k>for</span> <span class=n>job</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>pipeline_queue</span><span class=o>.</span><span class=n>get_jobs</span><span class=p>():</span>

        <span class=n>unreal</span><span class=o>.</span><span class=n>log</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;Submitting Job `</span><span class=si>{</span><span class=n>job</span><span class=o>.</span><span class=n>job_name</span><span class=si>}</span><span class=s2>` to Deadline...&quot;</span><span class=p>)</span>

        <span class=k>try</span><span class=p>:</span>
            <span class=c1># Create a Deadline job object with the default project level</span>
            <span class=c1># job info and plugin info</span>
            <span class=n>deadline_job</span> <span class=o>=</span> <span class=n>DeadlineJob</span><span class=p>(</span><span class=n>project_job_info</span><span class=p>,</span> <span class=n>project_plugin_info</span><span class=p>)</span>

            <span class=n>deadline_job_id</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>submit_job</span><span class=p>(</span>
                <span class=n>job</span><span class=p>,</span> <span class=n>deadline_job</span><span class=p>,</span> <span class=n>command_args</span><span class=p>,</span> <span class=n>deadline_service</span>
            <span class=p>)</span>

        <span class=k>except</span> <span class=ne>Exception</span> <span class=k>as</span> <span class=n>err</span><span class=p>:</span>
            <span class=n>unreal</span><span class=o>.</span><span class=n>log_error</span><span class=p>(</span>
                <span class=sa>f</span><span class=s2>&quot;Failed to submit job `</span><span class=si>{</span><span class=n>job</span><span class=o>.</span><span class=n>job_name</span><span class=si>}</span><span class=s2>` to Deadline, aborting render. </span><span class=se>\n\t</span><span class=s2>Error: </span><span class=si>{</span><span class=nb>str</span><span class=p>(</span><span class=n>err</span><span class=p>)</span><span class=si>}</span><span class=s2>&quot;</span>
            <span class=p>)</span>
            <span class=n>unreal</span><span class=o>.</span><span class=n>log_error</span><span class=p>(</span><span class=n>traceback</span><span class=o>.</span><span class=n>format_exc</span><span class=p>())</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>on_executor_errored_impl</span><span class=p>(</span><span class=kc>None</span><span class=p>,</span> <span class=kc>True</span><span class=p>,</span> <span class=nb>str</span><span class=p>(</span><span class=n>err</span><span class=p>))</span>
            <span class=n>unreal</span><span class=o>.</span><span class=n>EditorDialog</span><span class=o>.</span><span class=n>show_message</span><span class=p>(</span>
                <span class=s2>&quot;Submission Result&quot;</span><span class=p>,</span>
                <span class=sa>f</span><span class=s2>&quot;Failed to submit job `</span><span class=si>{</span><span class=n>job</span><span class=o>.</span><span class=n>job_name</span><span class=si>}</span><span class=s2>` to Deadline with error: </span><span class=si>{</span><span class=nb>str</span><span class=p>(</span><span class=n>err</span><span class=p>)</span><span class=si>}</span><span class=s2>. &quot;</span>
                <span class=sa>f</span><span class=s2>&quot;See log for more details.&quot;</span><span class=p>,</span>
                <span class=n>unreal</span><span class=o>.</span><span class=n>AppMsgType</span><span class=o>.</span><span class=n>OK</span><span class=p>,</span>
            <span class=p>)</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>on_executor_finished_impl</span><span class=p>()</span>
            <span class=k>return</span>

        <span class=k>if</span> <span class=ow>not</span> <span class=n>deadline_job_id</span><span class=p>:</span>
            <span class=n>message</span> <span class=o>=</span> <span class=p>(</span>
                <span class=sa>f</span><span class=s2>&quot;A problem occurred submitting `</span><span class=si>{</span><span class=n>job</span><span class=o>.</span><span class=n>job_name</span><span class=si>}</span><span class=s2>`. &quot;</span>
                <span class=sa>f</span><span class=s2>&quot;Either the job doesn&#39;t have any data to submit, &quot;</span>
                <span class=sa>f</span><span class=s2>&quot;or an error occurred getting the Deadline JobID. &quot;</span>
                <span class=sa>f</span><span class=s2>&quot;This job status would not be reflected in the UI. &quot;</span>
                <span class=sa>f</span><span class=s2>&quot;Check the logs for more details.&quot;</span>
            <span class=p>)</span>
            <span class=n>unreal</span><span class=o>.</span><span class=n>log_warning</span><span class=p>(</span><span class=n>message</span><span class=p>)</span>
            <span class=n>unreal</span><span class=o>.</span><span class=n>EditorDialog</span><span class=o>.</span><span class=n>show_message</span><span class=p>(</span>
                <span class=s2>&quot;Submission Result&quot;</span><span class=p>,</span> <span class=n>message</span><span class=p>,</span> <span class=n>unreal</span><span class=o>.</span><span class=n>AppMsgType</span><span class=o>.</span><span class=n>OK</span>
            <span class=p>)</span>
            <span class=k>return</span>

        <span class=k>else</span><span class=p>:</span>
            <span class=n>unreal</span><span class=o>.</span><span class=n>log</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;Deadline JobId: </span><span class=si>{</span><span class=n>deadline_job_id</span><span class=si>}</span><span class=s2>&quot;</span><span class=p>)</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>job_ids</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>deadline_job_id</span><span class=p>)</span>

            <span class=c1># Store the Deadline JobId in our job (the one that exists in</span>
            <span class=c1># the queue, not the duplicate) so we can match up Movie</span>
            <span class=c1># Pipeline jobs with status updates from Deadline.</span>
            <span class=n>job</span><span class=o>.</span><span class=n>user_data</span> <span class=o>=</span> <span class=n>deadline_job_id</span>

    <span class=c1># Now that we&#39;ve sent a job to Deadline, we&#39;re going to request a status</span>
    <span class=c1># update on them so that they transition from &quot;Ready&quot; to &quot;Queued&quot; or</span>
    <span class=c1># their actual status in Deadline. self.request_job_status_update(</span>
    <span class=c1># deadline_service)</span>

    <span class=n>message</span> <span class=o>=</span> <span class=p>(</span>
        <span class=sa>f</span><span class=s2>&quot;Successfully submitted </span><span class=si>{</span><span class=nb>len</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>job_ids</span><span class=p>)</span><span class=si>}</span><span class=s2> jobs to Deadline. JobIds: </span><span class=si>{</span><span class=s1>&#39;, &#39;</span><span class=o>.</span><span class=n>join</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>job_ids</span><span class=p>)</span><span class=si>}</span><span class=s2>. &quot;</span>
        <span class=sa>f</span><span class=s2>&quot;</span><span class=se>\n</span><span class=s2>Please use Deadline Monitor to track render job statuses&quot;</span>
    <span class=p>)</span>
    <span class=n>unreal</span><span class=o>.</span><span class=n>log</span><span class=p>(</span><span class=n>message</span><span class=p>)</span>

    <span class=n>unreal</span><span class=o>.</span><span class=n>EditorDialog</span><span class=o>.</span><span class=n>show_message</span><span class=p>(</span>
        <span class=s2>&quot;Submission Result&quot;</span><span class=p>,</span> <span class=n>message</span><span class=p>,</span> <span class=n>unreal</span><span class=o>.</span><span class=n>AppMsgType</span><span class=o>.</span><span class=n>OK</span>
    <span class=p>)</span>

    <span class=c1># Set the executor to finished</span>
    <span class=bp>self</span><span class=o>.</span><span class=n>on_executor_finished_impl</span><span class=p>()</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_deadline.repository.custom.plugins.UnrealEngine5.UnrealEnginePlugins.MoviePipelineDeadline.Content.Python.remote_executor.MoviePipelineDeadlineRemoteExecutor.submit_job class="doc doc-heading"> <code class="highlight language-python"><span class=n>submit_job</span><span class=p>(</span><span class=n>job</span><span class=p>,</span> <span class=n>deadline_job</span><span class=p>,</span> <span class=n>command_args</span><span class=p>,</span> <span class=n>deadline_service</span><span class=p>)</span></code> </h3> <div class="doc doc-contents "> <p>Submit a new Job to Deadline :param job: Queued job to submit :param deadline_job: Deadline job object :param list[str] command_args: Commandline arguments to configure for the Deadline Job :param deadline_service: An instance of the deadline service object :returns: Deadline Job ID :rtype: str</p> <details class=quote> <summary>Source code in <code>client/ayon_deadline/repository/custom/plugins/UnrealEngine5/UnrealEnginePlugins/MoviePipelineDeadline/Content/Python/remote_executor.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>241</span>
<span class=normal>242</span>
<span class=normal>243</span>
<span class=normal>244</span>
<span class=normal>245</span>
<span class=normal>246</span>
<span class=normal>247</span>
<span class=normal>248</span>
<span class=normal>249</span>
<span class=normal>250</span>
<span class=normal>251</span>
<span class=normal>252</span>
<span class=normal>253</span>
<span class=normal>254</span>
<span class=normal>255</span>
<span class=normal>256</span>
<span class=normal>257</span>
<span class=normal>258</span>
<span class=normal>259</span>
<span class=normal>260</span>
<span class=normal>261</span>
<span class=normal>262</span>
<span class=normal>263</span>
<span class=normal>264</span>
<span class=normal>265</span>
<span class=normal>266</span>
<span class=normal>267</span>
<span class=normal>268</span>
<span class=normal>269</span>
<span class=normal>270</span>
<span class=normal>271</span>
<span class=normal>272</span>
<span class=normal>273</span>
<span class=normal>274</span>
<span class=normal>275</span>
<span class=normal>276</span>
<span class=normal>277</span>
<span class=normal>278</span>
<span class=normal>279</span>
<span class=normal>280</span>
<span class=normal>281</span>
<span class=normal>282</span>
<span class=normal>283</span>
<span class=normal>284</span>
<span class=normal>285</span>
<span class=normal>286</span>
<span class=normal>287</span>
<span class=normal>288</span>
<span class=normal>289</span>
<span class=normal>290</span>
<span class=normal>291</span>
<span class=normal>292</span>
<span class=normal>293</span>
<span class=normal>294</span>
<span class=normal>295</span>
<span class=normal>296</span>
<span class=normal>297</span>
<span class=normal>298</span>
<span class=normal>299</span>
<span class=normal>300</span>
<span class=normal>301</span>
<span class=normal>302</span>
<span class=normal>303</span>
<span class=normal>304</span>
<span class=normal>305</span>
<span class=normal>306</span>
<span class=normal>307</span>
<span class=normal>308</span>
<span class=normal>309</span>
<span class=normal>310</span>
<span class=normal>311</span>
<span class=normal>312</span>
<span class=normal>313</span>
<span class=normal>314</span>
<span class=normal>315</span>
<span class=normal>316</span>
<span class=normal>317</span>
<span class=normal>318</span>
<span class=normal>319</span>
<span class=normal>320</span>
<span class=normal>321</span>
<span class=normal>322</span>
<span class=normal>323</span>
<span class=normal>324</span>
<span class=normal>325</span>
<span class=normal>326</span>
<span class=normal>327</span>
<span class=normal>328</span>
<span class=normal>329</span>
<span class=normal>330</span>
<span class=normal>331</span>
<span class=normal>332</span>
<span class=normal>333</span>
<span class=normal>334</span>
<span class=normal>335</span>
<span class=normal>336</span>
<span class=normal>337</span>
<span class=normal>338</span>
<span class=normal>339</span>
<span class=normal>340</span>
<span class=normal>341</span>
<span class=normal>342</span>
<span class=normal>343</span>
<span class=normal>344</span>
<span class=normal>345</span>
<span class=normal>346</span>
<span class=normal>347</span>
<span class=normal>348</span>
<span class=normal>349</span>
<span class=normal>350</span>
<span class=normal>351</span>
<span class=normal>352</span>
<span class=normal>353</span>
<span class=normal>354</span>
<span class=normal>355</span>
<span class=normal>356</span>
<span class=normal>357</span>
<span class=normal>358</span>
<span class=normal>359</span>
<span class=normal>360</span>
<span class=normal>361</span>
<span class=normal>362</span>
<span class=normal>363</span>
<span class=normal>364</span>
<span class=normal>365</span>
<span class=normal>366</span>
<span class=normal>367</span>
<span class=normal>368</span>
<span class=normal>369</span>
<span class=normal>370</span>
<span class=normal>371</span>
<span class=normal>372</span>
<span class=normal>373</span>
<span class=normal>374</span>
<span class=normal>375</span>
<span class=normal>376</span>
<span class=normal>377</span>
<span class=normal>378</span>
<span class=normal>379</span>
<span class=normal>380</span>
<span class=normal>381</span>
<span class=normal>382</span>
<span class=normal>383</span>
<span class=normal>384</span>
<span class=normal>385</span>
<span class=normal>386</span>
<span class=normal>387</span>
<span class=normal>388</span>
<span class=normal>389</span>
<span class=normal>390</span>
<span class=normal>391</span>
<span class=normal>392</span>
<span class=normal>393</span>
<span class=normal>394</span>
<span class=normal>395</span>
<span class=normal>396</span>
<span class=normal>397</span>
<span class=normal>398</span>
<span class=normal>399</span>
<span class=normal>400</span>
<span class=normal>401</span>
<span class=normal>402</span>
<span class=normal>403</span>
<span class=normal>404</span>
<span class=normal>405</span>
<span class=normal>406</span>
<span class=normal>407</span>
<span class=normal>408</span>
<span class=normal>409</span>
<span class=normal>410</span>
<span class=normal>411</span>
<span class=normal>412</span>
<span class=normal>413</span>
<span class=normal>414</span>
<span class=normal>415</span>
<span class=normal>416</span>
<span class=normal>417</span>
<span class=normal>418</span>
<span class=normal>419</span>
<span class=normal>420</span>
<span class=normal>421</span>
<span class=normal>422</span>
<span class=normal>423</span>
<span class=normal>424</span>
<span class=normal>425</span>
<span class=normal>426</span>
<span class=normal>427</span>
<span class=normal>428</span>
<span class=normal>429</span>
<span class=normal>430</span>
<span class=normal>431</span>
<span class=normal>432</span>
<span class=normal>433</span>
<span class=normal>434</span>
<span class=normal>435</span>
<span class=normal>436</span>
<span class=normal>437</span>
<span class=normal>438</span>
<span class=normal>439</span>
<span class=normal>440</span>
<span class=normal>441</span>
<span class=normal>442</span>
<span class=normal>443</span>
<span class=normal>444</span>
<span class=normal>445</span>
<span class=normal>446</span>
<span class=normal>447</span>
<span class=normal>448</span>
<span class=normal>449</span>
<span class=normal>450</span>
<span class=normal>451</span>
<span class=normal>452</span>
<span class=normal>453</span>
<span class=normal>454</span>
<span class=normal>455</span>
<span class=normal>456</span>
<span class=normal>457</span>
<span class=normal>458</span>
<span class=normal>459</span>
<span class=normal>460</span>
<span class=normal>461</span>
<span class=normal>462</span>
<span class=normal>463</span>
<span class=normal>464</span>
<span class=normal>465</span>
<span class=normal>466</span>
<span class=normal>467</span>
<span class=normal>468</span>
<span class=normal>469</span>
<span class=normal>470</span>
<span class=normal>471</span>
<span class=normal>472</span>
<span class=normal>473</span>
<span class=normal>474</span>
<span class=normal>475</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>submit_job</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>job</span><span class=p>,</span> <span class=n>deadline_job</span><span class=p>,</span> <span class=n>command_args</span><span class=p>,</span> <span class=n>deadline_service</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;</span>
<span class=sd>    Submit a new Job to Deadline</span>
<span class=sd>    :param job: Queued job to submit</span>
<span class=sd>    :param deadline_job: Deadline job object</span>
<span class=sd>    :param list[str] command_args: Commandline arguments to configure for the Deadline Job</span>
<span class=sd>    :param deadline_service: An instance of the deadline service object</span>
<span class=sd>    :returns: Deadline Job ID</span>
<span class=sd>    :rtype: str</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=c1># Get the Job Info and plugin Info</span>
    <span class=c1># If we have a preset set on the job, get the deadline submission details</span>
    <span class=k>try</span><span class=p>:</span>
        <span class=n>job_info</span><span class=p>,</span> <span class=n>plugin_info</span> <span class=o>=</span> <span class=n>get_deadline_info_from_preset</span><span class=p>(</span><span class=n>job_preset_struct</span><span class=o>=</span><span class=n>job</span><span class=o>.</span><span class=n>get_deadline_job_preset_struct_with_overrides</span><span class=p>())</span>

    <span class=c1># Fail the submission if any errors occur</span>
    <span class=k>except</span> <span class=ne>Exception</span> <span class=k>as</span> <span class=n>err</span><span class=p>:</span>
        <span class=k>raise</span> <span class=ne>RuntimeError</span><span class=p>(</span>
            <span class=sa>f</span><span class=s2>&quot;An error occurred getting the deadline job and plugin &quot;</span>
            <span class=sa>f</span><span class=s2>&quot;details. </span><span class=se>\n\t</span><span class=s2>Error: </span><span class=si>{</span><span class=n>err</span><span class=si>}</span><span class=s2> &quot;</span>
        <span class=p>)</span>

    <span class=c1># check for required fields in pluginInfo</span>
    <span class=k>if</span> <span class=s2>&quot;Executable&quot;</span> <span class=ow>not</span> <span class=ow>in</span> <span class=n>plugin_info</span><span class=p>:</span>
        <span class=k>raise</span> <span class=ne>RuntimeError</span><span class=p>(</span><span class=s2>&quot;An error occurred formatting the Plugin Info string. </span><span class=se>\n\t</span><span class=s2>Missing </span><span class=se>\&quot;</span><span class=s2>Executable</span><span class=se>\&quot;</span><span class=s2> key&quot;</span><span class=p>)</span>
    <span class=k>elif</span> <span class=ow>not</span> <span class=n>plugin_info</span><span class=p>[</span><span class=s2>&quot;Executable&quot;</span><span class=p>]:</span>
        <span class=k>raise</span> <span class=ne>RuntimeError</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;An error occurred formatting the Plugin Info string. </span><span class=se>\n\t</span><span class=s2>Executable value cannot be empty&quot;</span><span class=p>)</span>
    <span class=k>if</span> <span class=s2>&quot;ProjectFile&quot;</span> <span class=ow>not</span> <span class=ow>in</span> <span class=n>plugin_info</span><span class=p>:</span>
        <span class=k>raise</span> <span class=ne>RuntimeError</span><span class=p>(</span><span class=s2>&quot;An error occurred formatting the Plugin Info string. </span><span class=se>\n\t</span><span class=s2>Missing </span><span class=se>\&quot;</span><span class=s2>ProjectFile</span><span class=se>\&quot;</span><span class=s2> key&quot;</span><span class=p>)</span>
    <span class=k>elif</span> <span class=ow>not</span> <span class=n>plugin_info</span><span class=p>[</span><span class=s2>&quot;ProjectFile&quot;</span><span class=p>]:</span>
        <span class=k>raise</span> <span class=ne>RuntimeError</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;An error occurred formatting the Plugin Info string. </span><span class=se>\n\t</span><span class=s2>ProjectFile value cannot be empty&quot;</span><span class=p>)</span>

    <span class=c1># Update the job info with overrides from the UI</span>
    <span class=k>if</span> <span class=n>job</span><span class=o>.</span><span class=n>batch_name</span><span class=p>:</span>
        <span class=n>job_info</span><span class=p>[</span><span class=s2>&quot;BatchName&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=n>job</span><span class=o>.</span><span class=n>batch_name</span>

    <span class=k>if</span> <span class=nb>hasattr</span><span class=p>(</span><span class=n>job</span><span class=p>,</span> <span class=s2>&quot;comment&quot;</span><span class=p>)</span> <span class=ow>and</span> <span class=ow>not</span> <span class=n>job_info</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;Comment&quot;</span><span class=p>):</span>
        <span class=n>job_info</span><span class=p>[</span><span class=s2>&quot;Comment&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=n>job</span><span class=o>.</span><span class=n>comment</span>

    <span class=k>if</span> <span class=ow>not</span> <span class=n>job_info</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;Name&quot;</span><span class=p>)</span> <span class=ow>or</span> <span class=n>job_info</span><span class=p>[</span><span class=s2>&quot;Name&quot;</span><span class=p>]</span> <span class=o>==</span> <span class=s2>&quot;Untitled&quot;</span><span class=p>:</span>
        <span class=n>job_info</span><span class=p>[</span><span class=s2>&quot;Name&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=n>job</span><span class=o>.</span><span class=n>job_name</span>

    <span class=k>if</span> <span class=n>job</span><span class=o>.</span><span class=n>author</span><span class=p>:</span>
        <span class=n>job_info</span><span class=p>[</span><span class=s2>&quot;UserName&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=n>job</span><span class=o>.</span><span class=n>author</span>

    <span class=k>if</span> <span class=n>unreal</span><span class=o>.</span><span class=n>Paths</span><span class=o>.</span><span class=n>is_project_file_path_set</span><span class=p>():</span>
        <span class=c1># Trim down to just &quot;Game.uproject&quot; instead of absolute path.</span>
        <span class=n>game_name_or_project_file</span> <span class=o>=</span> <span class=p>(</span>
            <span class=n>unreal</span><span class=o>.</span><span class=n>Paths</span><span class=o>.</span><span class=n>convert_relative_path_to_full</span><span class=p>(</span>
                <span class=n>unreal</span><span class=o>.</span><span class=n>Paths</span><span class=o>.</span><span class=n>get_project_file_path</span><span class=p>()</span>
            <span class=p>)</span>
        <span class=p>)</span>

    <span class=k>else</span><span class=p>:</span>
        <span class=k>raise</span> <span class=ne>RuntimeError</span><span class=p>(</span>
            <span class=s2>&quot;Failed to get a project name. Please set a project!&quot;</span>
        <span class=p>)</span>

    <span class=c1># Create a new queue with only this job in it and save it to disk,</span>
    <span class=c1># then load it, so we can send it with the REST API</span>
    <span class=n>new_queue</span> <span class=o>=</span> <span class=n>unreal</span><span class=o>.</span><span class=n>MoviePipelineQueue</span><span class=p>()</span>
    <span class=n>new_job</span> <span class=o>=</span> <span class=n>new_queue</span><span class=o>.</span><span class=n>duplicate_job</span><span class=p>(</span><span class=n>job</span><span class=p>)</span>

    <span class=n>duplicated_queue</span><span class=p>,</span> <span class=n>manifest_path</span> <span class=o>=</span> <span class=n>unreal</span><span class=o>.</span><span class=n>MoviePipelineEditorLibrary</span><span class=o>.</span><span class=n>save_queue_to_manifest_file</span><span class=p>(</span>
        <span class=n>new_queue</span>
    <span class=p>)</span>

    <span class=c1># Convert the queue to text (load the serialized json from disk) so we</span>
    <span class=c1># can send it via deadline, and deadline will write the queue to the</span>
    <span class=c1># local machines on job startup.</span>
    <span class=n>serialized_pipeline</span> <span class=o>=</span> <span class=n>unreal</span><span class=o>.</span><span class=n>MoviePipelineEditorLibrary</span><span class=o>.</span><span class=n>convert_manifest_file_to_string</span><span class=p>(</span>
        <span class=n>manifest_path</span>
    <span class=p>)</span>

    <span class=c1># Loop through our settings in the job and let them modify the command</span>
    <span class=c1># line arguments/params.</span>
    <span class=n>new_job</span><span class=o>.</span><span class=n>get_configuration</span><span class=p>()</span><span class=o>.</span><span class=n>initialize_transient_settings</span><span class=p>()</span>
    <span class=c1># Look for our Game Override setting to pull the game mode to start</span>
    <span class=c1># with. We start with this game mode even on a blank map to override</span>
    <span class=c1># the project default from kicking in.</span>
    <span class=n>game_override_class</span> <span class=o>=</span> <span class=kc>None</span>

    <span class=n>out_url_params</span> <span class=o>=</span> <span class=p>[]</span>
    <span class=n>out_command_line_args</span> <span class=o>=</span> <span class=p>[]</span>
    <span class=n>out_device_profile_cvars</span> <span class=o>=</span> <span class=p>[]</span>
    <span class=n>out_exec_cmds</span> <span class=o>=</span> <span class=p>[]</span>
    <span class=k>for</span> <span class=n>setting</span> <span class=ow>in</span> <span class=n>new_job</span><span class=o>.</span><span class=n>get_configuration</span><span class=p>()</span><span class=o>.</span><span class=n>get_all_settings</span><span class=p>():</span>

        <span class=n>out_url_params</span><span class=p>,</span> <span class=n>out_command_line_args</span><span class=p>,</span> <span class=n>out_device_profile_cvars</span><span class=p>,</span> <span class=n>out_exec_cmds</span> <span class=o>=</span> <span class=n>setting</span><span class=o>.</span><span class=n>build_new_process_command_line_args</span><span class=p>(</span>
            <span class=n>out_url_params</span><span class=p>,</span>
            <span class=n>out_command_line_args</span><span class=p>,</span>
            <span class=n>out_device_profile_cvars</span><span class=p>,</span>
            <span class=n>out_exec_cmds</span><span class=p>,</span>
        <span class=p>)</span>

        <span class=c1># Set the game override</span>
        <span class=k>if</span> <span class=n>setting</span><span class=o>.</span><span class=n>get_class</span><span class=p>()</span> <span class=o>==</span> <span class=n>unreal</span><span class=o>.</span><span class=n>MoviePipelineGameOverrideSetting</span><span class=o>.</span><span class=n>static_class</span><span class=p>():</span>
            <span class=n>game_override_class</span> <span class=o>=</span> <span class=n>setting</span><span class=o>.</span><span class=n>game_mode_override</span>

    <span class=c1># This triggers the editor to start looking for render jobs when it</span>
    <span class=c1># finishes loading.</span>
    <span class=n>out_exec_cmds</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=s2>&quot;py mrq_rpc.py&quot;</span><span class=p>)</span>

    <span class=c1># Convert the arrays of command line args, device profile cvars,</span>
    <span class=c1># and exec cmds into actual commands for our command line.</span>
    <span class=n>command_args</span><span class=o>.</span><span class=n>extend</span><span class=p>(</span><span class=n>out_command_line_args</span><span class=p>)</span>

    <span class=k>if</span> <span class=n>out_device_profile_cvars</span><span class=p>:</span>
        <span class=c1># -dpcvars=&quot;arg0,arg1,...&quot;</span>
        <span class=n>command_args</span><span class=o>.</span><span class=n>append</span><span class=p>(</span>
            <span class=s1>&#39;-dpcvars=&quot;</span><span class=si>{dpcvars}</span><span class=s1>&quot;&#39;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span>
                <span class=n>dpcvars</span><span class=o>=</span><span class=s2>&quot;,&quot;</span><span class=o>.</span><span class=n>join</span><span class=p>(</span><span class=n>out_device_profile_cvars</span><span class=p>)</span>
            <span class=p>)</span>
        <span class=p>)</span>

    <span class=k>if</span> <span class=n>out_exec_cmds</span><span class=p>:</span>
        <span class=c1># -execcmds=&quot;cmd0,cmd1,...&quot;</span>
        <span class=n>command_args</span><span class=o>.</span><span class=n>append</span><span class=p>(</span>
            <span class=s1>&#39;-execcmds=&quot;</span><span class=si>{cmds}</span><span class=s1>&quot;&#39;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=n>cmds</span><span class=o>=</span><span class=s2>&quot;,&quot;</span><span class=o>.</span><span class=n>join</span><span class=p>(</span><span class=n>out_exec_cmds</span><span class=p>))</span>
        <span class=p>)</span>

    <span class=c1># Add support for telling the remote process to wait for the</span>
    <span class=c1># asset registry to complete synchronously</span>
    <span class=n>command_args</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=s2>&quot;-waitonassetregistry&quot;</span><span class=p>)</span>

    <span class=c1># Build a shot-mask from this sequence, to split into the appropriate</span>
    <span class=c1># number of tasks. Remove any already-disabled shots before we</span>
    <span class=c1># generate a list, otherwise we make unneeded tasks which get sent to</span>
    <span class=c1># machines</span>
    <span class=n>shots_to_render</span> <span class=o>=</span> <span class=p>[]</span>
    <span class=k>for</span> <span class=n>shot_index</span><span class=p>,</span> <span class=n>shot</span> <span class=ow>in</span> <span class=nb>enumerate</span><span class=p>(</span><span class=n>new_job</span><span class=o>.</span><span class=n>shot_info</span><span class=p>):</span>
        <span class=k>if</span> <span class=ow>not</span> <span class=n>shot</span><span class=o>.</span><span class=n>enabled</span><span class=p>:</span>
            <span class=n>unreal</span><span class=o>.</span><span class=n>log</span><span class=p>(</span>
                <span class=sa>f</span><span class=s2>&quot;Skipped submitting shot </span><span class=si>{</span><span class=n>shot_index</span><span class=si>}</span><span class=s2> in </span><span class=si>{</span><span class=n>job</span><span class=o>.</span><span class=n>job_name</span><span class=si>}</span><span class=s2> &quot;</span>
                <span class=sa>f</span><span class=s2>&quot;to server due to being already disabled!&quot;</span>
            <span class=p>)</span>
        <span class=k>else</span><span class=p>:</span>
            <span class=n>shots_to_render</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>shot</span><span class=o>.</span><span class=n>outer_name</span><span class=p>)</span>

    <span class=c1># If there are no shots enabled,</span>
    <span class=c1># &quot;these are not the droids we are looking for&quot;, move along ;)</span>
    <span class=c1># We will catch this later and deal with it</span>
    <span class=k>if</span> <span class=ow>not</span> <span class=n>shots_to_render</span><span class=p>:</span>
        <span class=n>unreal</span><span class=o>.</span><span class=n>log_warning</span><span class=p>(</span><span class=s2>&quot;No shots enabled in shot mask, not submitting.&quot;</span><span class=p>)</span>
        <span class=k>return</span>

    <span class=c1># Divide the job to render by the chunk size</span>
    <span class=c1># i.e {&quot;O&quot;: &quot;my_new_shot&quot;} or {&quot;0&quot;, &quot;shot_1,shot_2,shot_4&quot;}</span>
    <span class=n>chunk_size</span> <span class=o>=</span> <span class=nb>int</span><span class=p>(</span><span class=n>job_info</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;ChunkSize&quot;</span><span class=p>,</span> <span class=mi>1</span><span class=p>))</span>
    <span class=n>shots</span> <span class=o>=</span> <span class=p>{}</span>
    <span class=n>frame_list</span> <span class=o>=</span> <span class=p>[]</span>
    <span class=k>for</span> <span class=n>index</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=mi>0</span><span class=p>,</span> <span class=nb>len</span><span class=p>(</span><span class=n>shots_to_render</span><span class=p>),</span> <span class=n>chunk_size</span><span class=p>):</span>

        <span class=n>shots</span><span class=p>[</span><span class=nb>str</span><span class=p>(</span><span class=n>index</span><span class=p>)]</span> <span class=o>=</span> <span class=s2>&quot;,&quot;</span><span class=o>.</span><span class=n>join</span><span class=p>(</span><span class=n>shots_to_render</span><span class=p>[</span><span class=n>index</span> <span class=p>:</span> <span class=n>index</span> <span class=o>+</span> <span class=n>chunk_size</span><span class=p>])</span>

        <span class=n>frame_list</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=nb>str</span><span class=p>(</span><span class=n>index</span><span class=p>))</span>

    <span class=n>job_info</span><span class=p>[</span><span class=s2>&quot;Frames&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=s2>&quot;,&quot;</span><span class=o>.</span><span class=n>join</span><span class=p>(</span><span class=n>frame_list</span><span class=p>)</span>

    <span class=c1># Get the current index of the ExtraInfoKeyValue pair, we will</span>
    <span class=c1># increment the index, so we do not stomp other settings</span>
    <span class=n>extra_info_key_indexs</span> <span class=o>=</span> <span class=nb>set</span><span class=p>()</span>
    <span class=k>for</span> <span class=n>key</span> <span class=ow>in</span> <span class=n>job_info</span><span class=o>.</span><span class=n>keys</span><span class=p>():</span>
        <span class=k>if</span> <span class=n>key</span><span class=o>.</span><span class=n>startswith</span><span class=p>(</span><span class=s2>&quot;ExtraInfoKeyValue&quot;</span><span class=p>):</span>
            <span class=n>_</span><span class=p>,</span> <span class=n>index</span> <span class=o>=</span> <span class=n>key</span><span class=o>.</span><span class=n>split</span><span class=p>(</span><span class=s2>&quot;ExtraInfoKeyValue&quot;</span><span class=p>)</span>
            <span class=n>extra_info_key_indexs</span><span class=o>.</span><span class=n>add</span><span class=p>(</span><span class=nb>int</span><span class=p>(</span><span class=n>index</span><span class=p>))</span>

    <span class=c1># Get the highest number in the index list and increment the number</span>
    <span class=c1># by one</span>
    <span class=n>current_index</span> <span class=o>=</span> <span class=nb>max</span><span class=p>(</span><span class=n>extra_info_key_indexs</span><span class=p>)</span> <span class=o>+</span> <span class=mi>1</span> <span class=k>if</span> <span class=n>extra_info_key_indexs</span> <span class=k>else</span> <span class=mi>0</span>

    <span class=c1># Put the serialized Queue into the Job data but hidden from</span>
    <span class=c1># Deadline UI</span>
    <span class=n>job_info</span><span class=p>[</span><span class=sa>f</span><span class=s2>&quot;ExtraInfoKeyValue</span><span class=si>{</span><span class=n>current_index</span><span class=si>}</span><span class=s2>&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=sa>f</span><span class=s2>&quot;serialized_pipeline=</span><span class=si>{</span><span class=n>serialized_pipeline</span><span class=si>}</span><span class=s2>&quot;</span>

    <span class=c1># Increment the index</span>
    <span class=n>current_index</span> <span class=o>+=</span> <span class=mi>1</span>

    <span class=c1># Put the shot info in the job extra info keys</span>
    <span class=n>job_info</span><span class=p>[</span><span class=sa>f</span><span class=s2>&quot;ExtraInfoKeyValue</span><span class=si>{</span><span class=n>current_index</span><span class=si>}</span><span class=s2>&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=sa>f</span><span class=s2>&quot;shot_info=</span><span class=si>{</span><span class=n>json</span><span class=o>.</span><span class=n>dumps</span><span class=p>(</span><span class=n>shots</span><span class=p>)</span><span class=si>}</span><span class=s2>&quot;</span>
    <span class=n>current_index</span> <span class=o>+=</span> <span class=mi>1</span>

    <span class=c1># Set the job output directory override on the deadline job</span>
    <span class=k>if</span> <span class=nb>hasattr</span><span class=p>(</span><span class=n>new_job</span><span class=p>,</span> <span class=s2>&quot;output_directory_override&quot;</span><span class=p>):</span>
        <span class=k>if</span> <span class=n>new_job</span><span class=o>.</span><span class=n>output_directory_override</span><span class=o>.</span><span class=n>path</span><span class=p>:</span>
            <span class=n>job_info</span><span class=p>[</span><span class=sa>f</span><span class=s2>&quot;ExtraInfoKeyValue</span><span class=si>{</span><span class=n>current_index</span><span class=si>}</span><span class=s2>&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=sa>f</span><span class=s2>&quot;output_directory_override=</span><span class=si>{</span><span class=n>new_job</span><span class=o>.</span><span class=n>output_directory_override</span><span class=o>.</span><span class=n>path</span><span class=si>}</span><span class=s2>&quot;</span>

            <span class=n>current_index</span> <span class=o>+=</span> <span class=mi>1</span>

    <span class=c1># Set the job filename format override on the deadline job</span>
    <span class=k>if</span> <span class=nb>hasattr</span><span class=p>(</span><span class=n>new_job</span><span class=p>,</span> <span class=s2>&quot;filename_format_override&quot;</span><span class=p>):</span>
        <span class=k>if</span> <span class=n>new_job</span><span class=o>.</span><span class=n>filename_format_override</span><span class=p>:</span>
            <span class=n>job_info</span><span class=p>[</span><span class=sa>f</span><span class=s2>&quot;ExtraInfoKeyValue</span><span class=si>{</span><span class=n>current_index</span><span class=si>}</span><span class=s2>&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=sa>f</span><span class=s2>&quot;filename_format_override=</span><span class=si>{</span><span class=n>new_job</span><span class=o>.</span><span class=n>filename_format_override</span><span class=si>}</span><span class=s2>&quot;</span>

            <span class=n>current_index</span> <span class=o>+=</span> <span class=mi>1</span>

    <span class=c1># Build the command line arguments the remote machine will use.</span>
    <span class=c1># The Deadline plugin will provide the executable since it is local to</span>
    <span class=c1># the machine. It will also write out queue manifest to the correct</span>
    <span class=c1># location relative to the Saved folder</span>

    <span class=c1># Get the current commandline args from the plugin info</span>
    <span class=n>plugin_info_cmd_args</span> <span class=o>=</span> <span class=p>[</span><span class=n>plugin_info</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;CommandLineArguments&quot;</span><span class=p>,</span> <span class=s2>&quot;&quot;</span><span class=p>)]</span>

    <span class=k>if</span> <span class=ow>not</span> <span class=n>plugin_info</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;ProjectFile&quot;</span><span class=p>):</span>
        <span class=n>project_file</span> <span class=o>=</span> <span class=n>plugin_info</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;ProjectFile&quot;</span><span class=p>,</span> <span class=n>game_name_or_project_file</span><span class=p>)</span>
        <span class=n>plugin_info</span><span class=p>[</span><span class=s2>&quot;ProjectFile&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=n>project_file</span>

    <span class=c1># This is the map included in the plugin to boot up to.</span>
    <span class=n>project_cmd_args</span> <span class=o>=</span> <span class=p>[</span>
        <span class=sa>f</span><span class=s2>&quot;MoviePipelineEntryMap?game=</span><span class=si>{</span><span class=n>game_override_class</span><span class=o>.</span><span class=n>get_path_name</span><span class=p>()</span><span class=si>}</span><span class=s2>&quot;</span>
    <span class=p>]</span>

    <span class=c1># Combine all the compiled arguments</span>
    <span class=n>full_cmd_args</span> <span class=o>=</span> <span class=n>project_cmd_args</span> <span class=o>+</span> <span class=n>command_args</span> <span class=o>+</span> <span class=n>plugin_info_cmd_args</span>

    <span class=c1># Remove any duplicates in the commandline args and convert to a string</span>
    <span class=n>full_cmd_args</span> <span class=o>=</span> <span class=s2>&quot; &quot;</span><span class=o>.</span><span class=n>join</span><span class=p>(</span><span class=nb>list</span><span class=p>(</span><span class=n>OrderedDict</span><span class=o>.</span><span class=n>fromkeys</span><span class=p>(</span><span class=n>full_cmd_args</span><span class=p>)))</span><span class=o>.</span><span class=n>strip</span><span class=p>()</span>

    <span class=n>unreal</span><span class=o>.</span><span class=n>log</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;Deadline job command line args: </span><span class=si>{</span><span class=n>full_cmd_args</span><span class=si>}</span><span class=s2>&quot;</span><span class=p>)</span>

    <span class=c1># Update the plugin info with the commandline arguments</span>
    <span class=n>plugin_info</span><span class=o>.</span><span class=n>update</span><span class=p>(</span>
        <span class=p>{</span>
            <span class=s2>&quot;CommandLineArguments&quot;</span><span class=p>:</span> <span class=n>full_cmd_args</span><span class=p>,</span>
            <span class=s2>&quot;CommandLineMode&quot;</span><span class=p>:</span> <span class=s2>&quot;false&quot;</span><span class=p>,</span>
        <span class=p>}</span>
    <span class=p>)</span>

    <span class=n>deadline_job</span><span class=o>.</span><span class=n>job_info</span> <span class=o>=</span> <span class=n>job_info</span>
    <span class=n>deadline_job</span><span class=o>.</span><span class=n>plugin_info</span> <span class=o>=</span> <span class=n>plugin_info</span>

    <span class=c1># Submit the deadline job</span>
    <span class=k>return</span> <span class=n>deadline_service</span><span class=o>.</span><span class=n>submit_job</span><span class=p>(</span><span class=n>deadline_job</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> </div> </div> </div> </div> </div> </div> </article> </div> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> </main> <footer class=md-footer> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "../../../../../../../../../../..", "features": ["navigation.sections", "navigation.path", "navigation.prune"], "search": "../../../../../../../../../../../assets/javascripts/workers/search.f8cc74c7.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"provider": "mike"}}</script> <script src=../../../../../../../../../../../assets/javascripts/bundle.c8b220af.min.js></script> </body> </html>